- [自动驾驶虚拟仿真测试介绍（3）：测什么 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/144734290)

## 一、自动驾驶算法构成

一个完整的自动驾驶算法，可以粗略的用下图表示。

![img](https://pic4.zhimg.com/80/v2-1f8d4f7e2c4b3c6b7af95f98a2d8a01f_720w.jpg)

传感器的感知模块从真实环境中获取信息，并将其转换为原始信号发送给识别模块；识别模块从原始信号中识别出目标，并发出目标列表。比如摄像头的原始信号为图片数据，激光雷达的原始信号为点云数据，识别模块从中识别出前方目标的类型、位置和速度等信息。

融合模块对来自不同传感器的目标列表进行处理后，发出统一的目标列表给决策模块。决策模块分析目标列表，对目标未来的状态进行预测，并规划自车的行驶路径。控制模块根据目标行驶路径，发出加速、制动和转向等控制指令，对车辆状态进行控制。

根据上面的分析，大体上可以将一个完整的自动驾驶算法分为两个部分：

（1）感知识别模块，其输入是外部环境，输出是目标列表；

（2）决策控制模块，其输入是目标列表，输出是对车辆的控制指令。

## 二、自动驾驶仿真测试的两个阶段

远期的目标，自然是对完整的自己驾驶算法进行仿真测试，不过考虑到近期的实际情况，大致要分为两个发展阶段（当然这两个阶段可能并没有明显的时间界限）。

（1）阶段一：

在试验室和封闭试验场内对传感器的感知识别模块进行测试，在虚拟仿真环境对决策控制模块进行测试，仿真环境直接向决策控制模块提供目标列表。

这主要是因为目前对传感器的建模还有很多局限，从而不能进行有效（甚至是正确）的仿真。比如摄像头输出的图片较容易仿真，但是污渍、强光等特性仿真难度较大；而对于毫米波雷达如果建立精度较高的模型，计算速度较慢，不能满足仿真测试的需求。

在试验室和封闭试验场可以对测试环境进行完整的控制和数据记录。比如布置不同类别、位置和速度的行人和车辆，甚至可以对雨、雪、雾和强光的环境要素进行模拟，并将传感器处理输出的目标列表与真实环境进行对比，从而给出对感知识别模块的评估结果和改进建议。

这么做的好处是，在传感器建模有很多局限的情况下，依然能够在仿真环境下对决策控制模块进行测试，提前享受仿真测试的优势。

（2）阶段二：

在虚拟仿真环境进行高精度的传感器建模，从而对完整的自动驾驶算法进行测试。

这样不仅可以在同一环境下进行测试，从而提高测试效率、测试场景覆盖率和复杂度；而且可以对一些基于AI的算法进行端到端的测试。

这一阶段的难点，一方面是前面提到的满足测试需求的传感器建模，另外一方面是不同传感器厂家和OEM厂家直接交互的接口很可能不一致（有些情况下可能并不存在）。