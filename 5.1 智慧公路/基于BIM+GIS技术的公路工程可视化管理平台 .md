- [基于BIM+GIS技术的公路工程可视化管理平台](https://mp.weixin.qq.com/s?__biz=MjM5MjE1NzgzMw==&mid=2649390701&idx=1&sn=a0450a8bad1fbd3ab84849b3445f1992&chksm=beb4478b89c3ce9db643dab0c7f67bb9df68b2b207ded730605f7c00afcb458686c9fd2a944f&scene=132#wechat_redirect)

**作者：**于飞（甘肃省交通规划勘察设计院股份有限公司）

**摘要：**研究BIM相关政策及其技术发展趋势，分析BIM在公路行业的应用现状，探索BIM与GIS技术融合关键技术，研发了BIM+GIS可视化管理平台，并以实际项目应用证明方案的可行性，提高了项目管理能力，体现了技术应用价值。

以人工智能、区块链、量子计算等为代表的新一代信息技术正在加速布局和发展，而建筑信息模型（简称BIM）技术在交通基础设施项目规划、设计、建设、施工、运营、检测维护管理全生命周期中的应用，正在推动交通基础设施数字化变革。BIM与新一代信息技术的融合发展前景广阔，尤其是BIM与地理信息系统（简称GIS）的融合。GIS引擎通常具备强大的场景和数据支撑能力，能够支持大体量的三维模型数据，为BIM+GIS可视化管理提供了技术支撑和实现路径。

# 一 BIM技术与相关政策

BIM技术是基于现代信息技术和计算机技术发展融合而成的建筑信息应用技术，利用数字技术存储和传递建筑结构和构造特征，并以3D模式直观表述，实现工程项目整个生命周期内包括勘探设计、施工、建造、维护管理等全过程信息传递共享和工作协同，是对工程项目实体和功能特性的数字化表达，能够进行全面的可视化仿真与模拟分析[1]，极大优化项目质量、缩短项目周期和成本。

近些年，政府以及行业管理机构对BIM技术发展的重视力度持续加强。国务院2017年发布《关于促进建筑业持续健康发展的意见》提到加快推进建筑信息模型（BIM）技术在规划、勘察、设计、施工和运营维护全过程的集成应用。住房城乡建设部2019年发布行业标准《建筑工程设计信息模型制图标准》、国家标准《建筑信息模型设计交付标准》，进一步深化和明晰BIM交付体系、方法和要求，为BIM产品成为合法交付物提供了标准依据[2]。

交通行业BIM技术发展的起步虽然较晚，但在国家和交通运输部相关政策的大力推动下，BIM技术成为了促进“交通强国”建设、引领我国交通行业创新发展的新技术、新思路。2017年9月，交通运输部下发的《交通运输部关于开展公路BIM技术应用示范工程建设的通知》中明确指出，在项目设计、施工、运维不同阶段实现BIM的应用，同时确定第一批公路BIM示范项目。同年12月，《交通运输部办公厅关于推进公路水运工程BIM技术应用的指导意见》明确了BIM技术更深层次的应用要求。2020年8月，交通运输部《关于推动交通运输领域新型基础设施建设的指导意见》中鼓励在项目全生命周期协同应用建筑信息模型（BIM）技术，促进产业基础能力提升。

全国已经近80%省市自治区发布了省级BIM专项政策，明确应用范围和内容，约束BIM应用方向，评价BIM应用效果。同时更多的地区如广州市、青岛市等明确了应用标准及收费政策，有效地支撑了整体市场的活跃。

# 二 BIM在公路行业的应用方向

BIM技术在公路行业应用广泛，其中设计单位和施工单位应用水平较高，主要包括以下几个应用方向。

（1）方案比选和交底。根据设计意图或初设图纸快速建模，利用空间三维模型动态形式表达设计意图，软件导出的模型构件材料表估算造价成本，最终实现多个设计方案的外观构造和造价对比，分析得出最优方案。

（2）深化设计。通过精细、严格控制建模过程，核算工程数量和造价，提前主动发现施工图纸中的错误、缺项、漏算等问题。利用建模软件在施工之前对模型做碰撞检查，提前发现钢筋、管廊、施工工序中的碰撞问题，提前发现施工风险，减少变更成本，对于缩短工期和提升设计质量具有突出价值。

（3）复杂结构桥梁设计。大型复杂桥梁对结构设计要求较高，尤其是市政景观大桥，通常会有复杂曲面和异构构件，二维图纸设计无法准确表达设计意图、空间结构关系、获取坐标参数，方案论证时，三视图和口述形式表达不清。而BIM软件能够在曲面结构设计中发挥三维可视特性，解决空间结构设计的难点。如多锚杆形式的钢索锚拉箱，箱体与锚杆在三视图中投影重叠交错，坐标无法控制，借助BIM软件能够实现三维设计，自动导出二维图纸，解决了曲面和复杂结构桥梁设计手段不足的问题。

（4）施工工艺和工序模拟。BIM能够在时间、空间两个维度同步模拟施工进度情况，实现重点工程、工点的施工方案预演，分析评判施工工序、手段的科学合理性。公路工程施工中，通常结合VR/AR设备模拟施工工法、安全逃生演练。

# 三 GIS技术在公路行业应用现状

GIS是在计算机硬、软件系统支持下，对整个或部分地球表层（包括大气层）空间中的有关地理分布数据进行采集、储存、管理、运算、分析、显示和描述的技术系统[3]，不仅具备图库管理功能，而且具备空间分析能力。GIS引擎提供强大的二三维场景缓存能力，能够将公路工程中的多元异构数据以Rest接口形式对外发布，将BIM模型、倾斜摄影模型、激光点云等多元异构数据融合显示在三维场景中，结合周边沿线环境、交通枢纽、水文保护区、军事管理区等，为公路行业路线设计方案、规划，以及地质、水文和气象数据，提供图形处理、地理标注、信息表现、空间分析、POI等基础功能，为交通车流量、规划投资决策提供服务工具和技术手段。

# 四 BIM+GIS可视化关键技术

BIM技术的先天优势，决定了其在基础设施建设全寿命周期广泛应用，不断解决建设项目技术难题。但当前公路主流BIM软件均为国外核心技术，底层文件结构和数据接口尚未完全对用户开放，导致不同软件之间数据无法转换传递。建模软件完成的模型通常只有几何信息和材质信息，无法与施工管理中的分部分项对应，与施工过程关联不起来，这就无法发挥实际项目的应用价值。公路工程庞大的工程构造物模型文件所占用的存储空间可达100G，甚至更多，没有强大的载体就无法延展模型的应用空间。 

本研究基于Bentley系列软件作为建模平台，超图SuperMap  GIS软件作为GIS数据处理和发布软件。通过关键技术研究，实现基于BIM+GIS技术的公路工程可视化管理平台，并在临夏至大河家高速公路建设项目进行应用，一方面解决了BIM技术从设计到运维全过程应用的技术壁垒，延续了BIM模型的生命周期；另一方面，提升了项目建设管理水平，降低了运营管理成本。重点研究技术如下。

## （一）倾斜摄影建模技术

倾斜摄影是在公路工程BIM应用中最广泛的技术之一。该技术是在同一飞行平台上搭载多台传感器，同时从垂直、倾斜等不同角度采集影像，获取地面物体更为完整准确的信息[4]。地面坐标相控点用以控制模型运算精度和质量。三维模型数据生产的主要流程包括倾斜摄影空三加密、实景模型自动生成、实景模型单体化、实景模型修饰、质量检查等生产工艺。倾斜摄影处理流程如图1所示，倾斜摄影模型如图2所示。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/wwwW1TFZY45GHD63CCToYeGuSrljCXbzr54AYLw2HCUox92JzxouJt18HrVt4QYzYTONRP1BMUiasOt3PV5EqSQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

图1 倾斜摄影处理流程

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/wwwW1TFZY45GHD63CCToYeGuSrljCXbz5ic79t3PkSQXsKtfjPKgtyGLpVbdIdgSg3wbuM95kljnNQpFH2v61xw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

图2 倾斜摄影模型

倾斜摄影模型主要格式为3mx、osgb、obj、fbx、stl等，3mx是ContextCapture建模软件默认格式。OSGB是一种二进制存储，带有嵌入式链接纹理数据的倾斜摄影三维数据格式，此类数据文件碎，数量多，高级别金字塔文件大，难以实现不同地域、不同部门之间的数据共享；OBJ是一种标准三维模型文件格式，一般包括三个子文件，分别是.obj、.mtl、.jpg，除了模型文件，还需要.jpg的纹理文件。FBX主要用于建模软件间模型、材质、动作和摄影机信息的互导；SLT是一种表示三角形网格的文件格式，只能描述三维物体的几何信息，不支持颜色材质等信息。

超图提供的开放式可扩展的空间三维模型数据格式Spatial 3D Model（S3M），适用于空间三维模型数据的传输、交换与共享，有助于解决多源空间三维模型数据在不同终端（移动设备、浏览器、桌面电脑）地理信息平台中的存储、高效可视化、共享与互操作等难题[5]，可视化平台中使用的所有模型均采用S3M格式存储和传输。

## （二）模型文件与GIS数据格式转换

BIM建模设计软件众多，文件格式各不相同。Bentley平台的数据格式和软件接口相对封闭，通过中间格式进行数据对接时，容易丢失几何对象及空间关系、属性、材质。本文从底层数据结构出发，基于OGDC开放式空间数据库标准，以及Bentley公司的Mstn（Microstation）软件开发了数据转换中间件。首先，采用抽壳（HollowShell）技术，精准提取几何模型，并深度遍历DGN（bentley文件格式）文件，完整地导出模型的材质和属性。其次，根据细节层次（Level of  Details，LOD）技术将几何模型解析出不同的显示精度和显示细节，大幅减少了三角面片数，摒弃了模型的隐藏特征、约束信息等非必要信息。最后，利用SuperMap  GIS组件对Bentley设计模型中解析出的数据进行模型重构，无损还原BIM模型，集成属性信息，实现模型DGN文件转化为超图GIS系统的udb/udd数据源文件，转换后的模型数据涵盖原始模型中几何数据、材质纹理数据、坐标属性数据等全部属性，打破了BIM与GIS之间的数据格式壁垒，实现数据的传递和交换。

## （三）坐标系配准

可视化平台需要集成模型、地形影像、GIS数据、文本等多元异构数据，而这些数据有的无坐标或有各不相同的坐标系。构造统一平台就需要精准匹配所有数据到同一个地理坐标系下，正确的位置关系才能反应工程实际和位置环境。

工程构造物模型的坐标是根据CAD图纸中的路线工程坐标来确定的。通常将CAD图纸参考到三维建模软件进行建模，从而确定三维模型的坐标就是工程自带坐标系。倾斜摄影模型坐标在做模型运算配置时根据项目实际配置了坐标系。BIM模型在建模时基于平面坐标系，而超图三维地理环境是球面坐标系，故需要将平面坐标系模型转化到球面坐标系中。但平面BIM模型到球面中必然会出现模型错岔和断裂情况。解决方法是将构造物模型的工程独立坐标系通过坐标投影转换转为WGS84坐标系，而倾斜摄影基于控制点能够直接生产WGS84坐标系下的实景模型。地形影像数据调用谷歌、天地图等基于WGS84坐标系的公共资源服务，统一坐标系实现了坐标校准。

## （四）模型轻量化

模型轻量化需要处理两部分内容，一个是工程构造物模型，另一个是倾斜摄影模型。公路工程道路隧道路线长、结构复杂，包括岩土工程、结构、排水、机电、交安等多专业类型模型。模型底层是基于三角网结合UV材质计算，可以通过SuperMap  iDesktop软件进行三角网简化、子对象简化、去除重复点、提取外壳、模型拆分、模型合并等，减少模型体量。另外，在做数据转换时的减面算法能够大幅减少模型几何面数，实现大场景、复杂模型网络端加载，解决公路工程BIM大场景加载及渲染性能问题。减面算法如图3所示。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/wwwW1TFZY45GHD63CCToYeGuSrljCXbzk9fr5qXtERqnBP6tGZEmJcAPSYX6N6szX86zcic2MicFficmckh8pLjMw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

图3 减面算法

倾斜摄影模型成果往往数据量非常庞大，如果不做轻量化简化处理，浏览器负载压力大，渲染速度很慢，长时间加载导致服务器长时间资源占用，拖垮性能。在SuperMap GIS软件中，优化倾斜摄影模型数据方案主要通过压缩材质纹理、合并根节点、数据入库解决碎文件。

合并根节点能够将原始相邻的四个小块合并成一个新的大块来减少根节点数量，通常将根节点数量合并在100个以下，单个瓦片大小在500K-3M区间最优。倾斜摄影模型纹理是必不可少的，而纹理所占大小基本在1/2以上。DXT是目前应用最广泛的纹理压缩格式，它无需CPU解压就被GPU直接采样，可以极大减少内存和带宽的占用，提升运行效率。

由于倾斜摄影数据、激光点云数据、地形/影像数据中往往存在海量碎文件，以文件系统方式存储导致I/O效率极低，传统关系型数据库性能和可扩展能力不足，通过HBase分布式整合MongoDB非关系型数据库的解决方案能够大幅降低存储空间[6]，提升存储和读取效率，性能可提升约4倍以上。

## （五）模型赋业务属性

模型是BIM技术应用的基础和信息的载体。但模型不能只存在建模软件中，需要其他载体实现模型信息的传递和交互。通常建模软件输出的模型有几何、材料、重量、体积等基础信息，没有与设计、施工中的质量、进度、安全业务相关联的工程分部分项数据。模型只有具备了工程分部分项属性，才具备参与业务管理和分析的能力。  

三维建模软件众多，如Revit、Bentley系列、达索等主流软件，在各自领域内对模型属性定义各不相同。在Bentley平台中，首先定义一个属性模板DGN文件，模板中包括单位工程、分部工程、分项工程、部位等工程WBS字段。模型赋属性时通过调用属性模板，给每一个构件或组合结构都依据工程项目实体分解项进行赋值。另外，模型与施工WBS、桩号、进度、质量生产过程数据关联，实现模型与建设过程业务数据的关联，并在地理信息系统中与地形影像、三维场景进行数据镶嵌处理，通过超图iServer发布至浏览器中实现模型信息、地理场景信息、施工业务数据的深度融合。模型属性与业务关联如图4所示。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/wwwW1TFZY45GHD63CCToYeGuSrljCXbz2NopjBHsXy9xvYia6FObU23iadOISNL74QanDwKRFegkugpVL58SAic5g/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

图4 模型属性与业务关联

# 五 BIM+GIS可视化项目应用

基于对以上关键技术的研究，本文开发BIM+GIS可视化管理平台，完美地将BIM与GIS结合，利用倾斜摄影技术搭建三维场景，结合传统二维地形，实现多维场景一体化展示。首先，通过BIM设计软件建立项目全线构造物设计模型，模型中承载构造物几何尺寸、材料材质、空间位置关系等信息，然后将大体量模型在地理信息系统中与地形影像、三维场景进行数据转化和GIS处理，发布至浏览器中实现模型信息、地理场景信息、施工业务数据的深度融合，最后开发基础地理系统数据库、BIM数据库、业务系统数据库，实现各业务数据集成，通过软件集成与开发，实现在G341线二十里沟至车路崾蚬公路建设项目中的应用。BIM+GIS可视化管理项目应用如图5所示。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/wwwW1TFZY45GHD63CCToYeGuSrljCXbzamzpxUYZcy5tLicEQ0tmia8Aibr8OnNtBbnJdra0ztpmBQjlMsdMPc8Vw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

图5 BIM+GIS可视化管理项目应用

G341线环县（二十里沟口）至车路崾岘（甘宁界）公路为《国家公路网规划（2013年-2030年）》东西横线中胶南至海晏公路的组成部分，是拟建的大板梁至庆城、在建甜水堡至罗儿沟圈、银川至固原高速公路的连接线，是庆阳市煤炭石油运输及省际出境通道，是甘肃省普通国道341线升级改造的重点项目，也是《甘肃省高速公路网规划》中的重要公路之一。BIM+GIS可视化管理平台解决了复杂地形条件下远端项目管理功能，将BIM模型、倾斜摄影模型、激光点云等多元异构数据融合，在浏览器中提供三维场景应用和施工业务管理。

可视化管理平台后台依托于Spring基础框架，结合mysql数据库进行后端数据管理及配置。基于Spring Boot组件实现路由转发、参数传递等。采用shiro安全框架，进行登录及权限验证。采用Ehcache和Spring  Session管理器，进行单用户登录验证，处理session缓存。融合开源Captcha验证码验证技术，进行登录验证。使用Spring的quartz多线程接口，实现多任务数据流转。利用SpringMVC的事务管理器，实现各业务功能之间事务提交与回滚，确保了数据的一致性。采用Sring data组件来处理数据持久化操作。基于阿里的数据库连接池（Druid），确保数据持久化时数据库的连接。

BIM+GIS可视化前端页面设计基于WEBGL技术，可兼容主流Web浏览器。采用SuperMap封装的Cesium开源框架，实现客户端三维GIS场景的高性能渲染。结合bootstrap前端基础框架和thymeleaf数据引擎，实现自定义GIS工具包的封装引用。BIM+GIS平台基础架构如图6所示。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/wwwW1TFZY45GHD63CCToYeGuSrljCXbzsMNZX82B1uWOEEEgxJonCYXVZEJibRSgEkIQKwq8nzibJYpCPRIUTDTw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

图6 BIM+GIS平台基础架构

平台搭建基础地理系统数据库、BIM数据库、业务系统数据库，实现各业务系统数据集成和组织权限，为工程项目各参与方提供权限控制、相对独立的数据分析和辅助决策功能。平台能够实现空间量测、空间分析、红线标注、区域规划、行车飞行漫游等空间管理功能。模型通过属性与工程实体关联对应，实现通过空间模型构件查询设计图纸功能，如图7所示。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/wwwW1TFZY45GHD63CCToYeGuSrljCXbzQEtLcKoUzKljMgzJlh3MicKSBicTUcSp5BicVDkfAxdgF6vbsSwTP4AAQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

图7 空间查询与设计图纸

项目建设过程中，需要制定作业计划、把控施工进度。平台以WBS为载体，以进度为主线，通过移动端App实时采集和同步数据，将BIM模型关联施工计划数据、作业数据和造价等数据，统计分析进度完成情况、计划偏差情况、产值情况，实时预警，可视化展示真实形象进度。能够实现年度、月、日、周计划进度与实际进度完成情况查看，以及偏差分析和进度报表统计。进度统计与形象进度如图8所示。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/wwwW1TFZY45GHD63CCToYeGuSrljCXbzMutZVtFyhx2C992UglggibtBj7FvPwibbHjGibA0vbyD3nWy0F4GD7Tiag/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

图8 进度统计与形象进度

质量安全包括人员、机械、材料等施工过程控制和实时安全监控，为项目各参与方提供施工数据监测、分析统计及安全措施，不断提升建设质量，切实做到施工过程可控，落实安全防范。质量管理中实现材料检测，试验检测实时数据上传、分析、查询，控制自检、巡检、报检、整改业务流程。支持施工人员在隧道模型中的定位检测，有害气体检测，实时视频监控。结合模型，倾斜摄影和传感器定位，实现高边坡设备检测数据展示。质量管控与边坡检测如图9所示。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/wwwW1TFZY45GHD63CCToYeGuSrljCXbzDFb6FKicvYtFibHmQS0W03XXYy7CibGUBcvdYnx2iaJPDO3uXutBgdNmiaw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

图9 质量管控与边坡检测

在性能方面，通过研究建模软件与GIS软件底层数据结构，开发数据转化软件，使数据格式完全兼容，数据传输完整率达到99%。采用Spark框架技术实现GIS与BIM大数据分布式存储，处理速度和系统吞吐量等指标均达到良好水平。通过优化GIS数据处理算法，大幅提升引擎运算效率，Web浏览器中三维地理场景加载大体量模型平均响应时间小于1秒。BIM模型与GIS坐标无缝对接，生产业务数据与模型数据关联完整、传输可靠，有效集成其他信息化平台数据，提供了实际工程项目应用的技术支撑。

# 六 结束语

本文通过研究BIM技术和GIS技术在公路工程行业的应用现状，解决了BIM与GIS融合的技术障碍，打通了业务数据传递，实现了多信息化系统数据与模型数据集成，一个平台实现质量进度安全等三维可视化管理，为项目管理者提供了更好的技术手段和业务管控能力。通过项目实践可以看出，BIM与GIS的融合技术已经具有广泛的应用价值，是公路工程项目精细化、数字化、智慧化、可视化管理的基础。在“BIM+”技术的快速发展浪潮中，传统信息化手段已不具备大型业务能力，需要不断进行技术拓展，与BIM技术融合发展。GIS技术自身也在不断发展创新，基于人工智能、大数据、区块链、3D打印的GIS产品已经发布，由此带来的技术融合方案和相关产品正在投向市场，BIM技术也将获得更多发展机遇。随着传统建设项目管理水平的不断提高，业务数据化、数据标准化的潜在逻辑也会助推BIM与GIS技术的融合发展。

# 参考文献

[1] 王斌,杨鸿.BIM技术在公路设计中的应用现状与展望[J].公路,2019(10).

[2] 广联达研究院.BIM技术赋能建筑业数字化转型[J].建筑,2019(22):2-3.

[3] 陈明.基于GIS+BIM的高速公路征地拆迁管理系统[J].中国交通信息化,2018(9):30-32.

[4] 王丙涛,王继.基于倾斜摄影技术的三维建模生产与质量分析[J].城市勘测,2015(10).

[5] 陆国伟,李广明.S3M三维数据标准设计研究[J].测绘与空间地理信息,2017(S1):88-90.

[6] 徐旭东,郭瑞,文瑞杰.分布式下MongoDB对激光点云的存储和处理研究[J].计算机应用与软件,2017,34(2):4.