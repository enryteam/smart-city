## 云平台数据结构

### 数据输入

云平台输入MEC的数据结构

### 数据输出

MEC上传到云平台的数据结构

## 云平台数据库

### 地图数据

表名：Map

| 属性名    | 类型   | 长度 | 小数点 | **必须（-1非必须）** | 字段注释 |
| :-------- | :----- | ---- | ------ | :------------------- | :------- |
| id        | bigint | 0    | 0      | 0                    | 地图编号 |
| timestamp | int    | 0    | 0      | -1                   | 时间戳   |
| region    | bigint | 0    | 0      | 0                    | 区域编号 |

表名：Node

说明：节点。道路线形发生变化处定义为节点，如匝道/车道减少等情况。

| 属性名 | 类型    | 长度 | 小数点 | **必须（-1非必须）** | 字段注释                              |
| :----- | :------ | ---- | ------ | :------------------- | :------------------------------------ |
| id     | bigint  | 0    | 0      | 0                    | 节点编号                              |
| region | bigint  | 0    | 0      | 0                    | 区域编号                              |
| name   | varchar | 50   | 0      | -1                   | 节点名称                              |
| lon    | double  | 0    | 7      | 0                    | 经度，精确到微度，范围（-180°~+180°） |
| lat    | double  | 0    | 7      | 0                    | 纬度，精确到微度，范围（-90°~+90°）   |
| ele    | double  | 0    | 1      | 0                    | 海拔高度，范围（-409.5m~+6143.9m）    |

表名：Link

说明：路段。两个节点之间定义为一个路段。

| 属性名           | 类型    | 长度 | 小数点 | **必须（-1非必须）** | 字段注释laneId |
| :--------------- | :------ | ---- | ------ | :------------------- | :------------- |
| id               | bigint  | 0    | 0      | 0                    | 路段编号       |
| name             | varchar | 50   | 0      | -1                   | 路段名称       |
| upstreamNodeId   | bignit  | 0    | 0      | 0                    | 上游交叉口编号 |
| downstreamNodeId | bignit  | 0    | 0      | 0                    | 下游交叉口编号 |
| linkWidth        | double  | 0    | 2      | -1                   | 路段宽带       |

表名：Lane

说明：车道。

| 属性名         | 类型    | 长度 | 小数点 | **必须（-1非必须）** | 字段注释laneId                                               |
| :------------- | :------ | ---- | ------ | :------------------- | :----------------------------------------------------------- |
| id             | bigint  | 0    | 0      | 0                    | 车道编号                                                     |
| linkId         | biging  | 0    | 0      | -1                   | 所处路段编号                                                 |
| laneWidth      | double  | 0    | 2      | -1                   | 车道宽度                                                     |
| laneType       | tinyint | 0    | 0      | 0                    | 车道类型（0为机动车道，1为人行横道，2为非机动车道，3为人行道，4为分隔带，5为路标，6为列车道 ，7为停车道） |
| laneAttribute  | tinyint | 0    | 0      | 0                    | 车道属性，多选类型（二进制情况下用01去代表是否选择该位的属性）（1为客车，2为货车，3为公交车，4为出租车，5为大型车，6为中型车，7为小型车，8为其他机动车，9为非机动车，10为行人） |
| maneuver       | tinyint | 0    | 0      | -1                   | 允许的车道功能，多选类型（二进制情况下用01去代表是否选择该位的属性）（1为直行，2为左转，3为右转，4为掉头，5为换道，6为禁停，7为慎行） |
| speedLimitType | array   | 0    | 0      | -1                   | 限速类型列表（0为未知，1为学校区域最大速度，2为有儿童在场时的学校区域最大速度，3为施工区最大速度，4为车辆最小速度，5为车辆最大速度，6为车辆夜间最大速度，7为货车最小速度，8为货车最大速度，9为货车夜间最大速度，10为有拖车时最小速度，11为有拖车时最大速度，12为有拖车时夜间最大速度） |
| speed          | array   | 0    | 2      | -1                   | 限速列表（m/s）                                              |

表名：RoadPoint

说明：路段点。

| 属性名    | 类型   | 长度 | 小数点 | **必须（-1非必须）** | 字段注释                              |
| :-------- | :----- | ---- | ------ | :------------------- | :------------------------------------ |
| id        | bigint | 0    | 0      | 0                    | 路段点编号                            |
| lon       | double | 0    | 7      | 0                    | 经度，精确到微度，范围（-180°~+180°） |
| lat       | double | 0    | 7      | 0                    | 纬度，精确到微度，范围（-90°~+90°）   |
| ele       | double | 0    | 1      | 0                    | 海拔高度，范围（-409.5m~+6143.9m）    |
| linkId    | biging | 0    | 0      | -1                   | 所处路段编号                          |
| sectionId | biging | 0    | 0      | -1                   | 所处子路段编号                        |
| laneId    | biging | 0    | 0      | -1                   | 所处车道编号                          |

表名：Connection

说明：连接情况。代表车道之间的物理连接关系。

| 属性名     | 类型   | 长度 | 小数点 | **必须（-1非必须）** | 字段注释     |
| :--------- | :----- | ---- | ------ | :------------------- | :----------- |
| id         | bigint | 0    | 0      | 0                    | 连接编号     |
| fromLaneId | int    | 0    | 0      | 0                    | 上游车道编号 |
| toLaneId   | int    | 0    | 0      | 0                    | 下游车道编号 |

表名：Section

说明：子路段。根据雷视检测区域划分路段。

| 属性名    | 类型   | 长度 | 小数点 | **必须（-1非必须）** | 字段注释       |
| :-------- | :----- | ---- | ------ | :------------------- | :------------- |
| id        | bigint | 0    | 0      | 0                    | 子路段编号     |
| linkId    | bigint | 0    | 0      | 0                    | 所处路段编号   |
| pileStart | bigint | 0    | 0      | 0                    | 子路段起始桩号 |
| pileEnd   | bigint | 0    | 0      | 0                    | 子路段结束桩号 |

表名：TollStation

说明：收费站。

| 属性名        | 类型    | 长度 | 小数点 | **必须（-1非必须）** | 字段注释                                                     |
| :------------ | :------ | ---- | ------ | :------------------- | :----------------------------------------------------------- |
| id            | bigint  | 0    | 0      | 0                    | 编号                                                         |
| name          | varchar | 50   | 0      | 0                    | 收费站名称                                                   |
| type          | int     | 0    | 0      | -1                   | 收费站类型                                                   |
| fromSectionId | biging  | 0    | 0      | -1                   | 上游子路段编号                                               |
| toSectionId   | bigint  | 0    | 0      | -1                   | 下游子路段编号                                               |
| vehicleType   | tinyint | 0    | 0      | -1                   | 收费车辆类型，多选类型（二进制情况下用01去代表是否选择该位的属性）（1为客车，2为货车，3为公交车，4为出租车，5为大型车，6为中型车，7为小型车） |

表名：ServiceArea

说明：服务区。

| 属性名        | 类型    | 长度 | 小数点 | **必须（-1非必须）** | 字段注释       |
| :------------ | :------ | ---- | ------ | :------------------- | :------------- |
| id            | bigint  | 0    | 0      | 0                    | 编号           |
| name          | varchar | 50   | 0      | 0                    | 服务区名称     |
| type          | int     | 0    | 0      | -1                   | 服务区类型     |
| fromSectionId | bigint  | 0    | 0      | -1                   | 上游子路段编号 |
| toSectionId   | bigint  | 0    | 0      | -1                   | 下游子路段编号 |

表名：Ramp

说明：匝道。

| 属性名        | 类型    | 长度 | 小数点 | **必须（-1非必须）** | 字段注释       |
| :------------ | :------ | ---- | ------ | :------------------- | :------------- |
| id            | bigint  | 0    | 0      | 0                    | 编号           |
| name          | varchar | 50   | 0      | 0                    | 匝道名称       |
| type          | int     | 0    | 0      | -1                   | 匝道类型       |
| fromSectionId | bigint  | 0    | 0      | -1                   | 上游子路段编号 |
| toSectionId   | bigint  | 0    | 0      | -1                   | 下游子路段编号 |

### 设备数据

表名：DeviceInfo

说明：设备基本信息。

| 属性名     | 类型    | 长度 | 小数点 | 必须（-1非必须） | 字段注释                              |
| :--------- | :------ | ---- | ------ | :--------------- | :------------------------------------ |
| id         | bigint  | 0    | 0      | 0                | 编号                                  |
| deviceId   | bigint  | 0    | 0      | 0                | 设备id                                |
| deviceType | varchar | 10   | 0      | -1               | 设备类型                              |
| lon        | double  | 0    | 7      | -1               | 经度，精确到微度，范围（-180°~+180°） |
| lat        | double  | 0    | 7      | -1               | 纬度，精确到微度，范围（-90°~+90°）   |
| ele        | double  | 0    | 1      | -1               | 海拔高度，范围（-409.5m~+6143.9m）    |

表名：DeviceManage

设备：设备管理。表示设备的检测范围。

| 属性名        | 类型    | 长度 | 小数点 | 必须（-1非必须） | 字段注释                              |
| :------------ | :------ | ---- | ------ | :--------------- | :------------------------------------ |
| id            | bigint  | 0    | 0      | 0                | 编号                                  |
| timestamp     | int     | 0    | 0      | -1               | 时间戳（min），范围（0min~527040min） |
| sectionIdList | varchar | 50   | 0      | 0                | 检测子路段编号列表                    |
| deviceId      | bigint  | 0    | 0      | 0                | 设备编号                              |
| beginPointId  | bigint  | 0    | 0      | 0                | 检测范围起点编号                      |
| endPointId    | bigint  | 0    | 0      | 0                | 检测范围终点编号                      |
| direction     | int     | 0    | 0      | 0                | 检测方向                              |

表名：MECManage

说明：MEC管理。MEC所管理设备。

| 属性名       | 类型    | 长度 | 小数点 | 必须（-1非必须） | 字段注释                              |
| :----------- | :------ | ---- | ------ | :--------------- | :------------------------------------ |
| id           | bigint  | 0    | 0      | 0                | 编号                                  |
| timestamp    | int     | 0    | 0      | 0                | 时间戳（min），范围（0min~527040min） |
| MECId        | bigint  | 0    | 0      | 0                | MEC设备id                             |
| deviceIdList | varchar | 50   | 0      | 0                | 管理设备编号列表                      |

表名：DeviceAbnormal

说明：设备异常状态。

| 属性名         | 类型    | 长度 | 小数点 | 必须（-1非必须） | 字段注释                                  |
| :------------- | :------ | ---- | ------ | :--------------- | :---------------------------------------- |
| id             | bigint  | 0    | 0      | 0                | 编号                                      |
| timestampStart | int     | 0    | 0      | 0                | 开始时间戳（min），范围（0min~527040min） |
| timestampEnd   | int     | 0    | 0      | 0                | 结束时间戳（min），范围（0min~527040min） |
| deviceId       | bigint  | 0    | 0      | 0                | 设备id                                    |
| abnormalType   | varchar | 50   | 0      | -1               | 异常类型                                  |
| description    | varchar | 100  | 0      | -1               | 问题描述                                  |
| state          | tinyint | 0    | 0      | -1               | 处理状态                                  |

### 事件数据

表名：RoadsideEvent

说明：路侧事件。

| 属性名         | 类型    | 长度 | 小数点 | 必须（-1非必须） | 字段注释                                                     |
| :------------- | :------ | ---- | ------ | :--------------- | :----------------------------------------------------------- |
| id             | bigint  | 0    | 0      | 0                | 编号                                                         |
| timestampStart | int     | 0    | 0      | 0                | 开始时间戳（min），范围（0min~527040min）                    |
| timestampEnd   | int     | 0    | 0      | 0                | 结束时间戳（min），范围（0min~527040min）                    |
| deviceId       | varchar | 50   | 0      | 0                | 检测器编号                                                   |
| direction      | int     | 0    | 0      | -1               | 方向（针对同一个设备监测双向的情况）                         |
| laneNo         | int     | 0    | 0      | -1               | 车道编号                                                     |
| lon            | double  | 0    | 7      | -1               | 经度，精确到微度，范围（-180°~+180°）                        |
| lat            | double  | 0    | 7      | -1               | 纬度，精确到微度，范围（-90°~+90°）                          |
| ele            | double  | 0    | 1      | -1               | 海拔高度，范围（-409.5m~+6143.9m）                           |
| type           | tinyint | 0    | 0      | -1               | 描述信息警告或交通标志类型，参考国标GB 5768.2和GBT 29100-2012 |
| describe       | varchar | 100  | 0      | -1               | 事件描述                                                     |
| riskLevel      | tinyint | 0    | 0      | -1               | 风险等级                                                     |
| picture        | BLOB    | 0    | 0      | -1               | 事件图片                                                     |
| alertPath      | varchar | 50   | 0      | -1               | 预警路径，轨迹点列表                                         |
| alertRadius    | tinyint | 50   | 0      | -1               | 影响范围                                                     |
| state          | tinyint | 0    | 0      | -1               | 处理状态                                                     |

表名：CenterEvent

说明：中心事件。

| 属性名         | 类型    | 长度 | 小数点 | 必须（-1非必须） | 字段注释                                                     |
| :------------- | :------ | ---- | ------ | :--------------- | :----------------------------------------------------------- |
| id             | bigint  | 0    | 0      | 0                | 编号                                                         |
| timestampStart | int     | 0    | 0      | 0                | 开始时间戳（min），范围（0min~527040min）                    |
| timestampEnd   | int     | 0    | 0      | 0                | 结束时间戳（min），范围（0min~527040min）                    |
| deviceIdList   | varchar | 50   | 0      | 0                | 发布设备编号列表                                             |
| type           | tinyint | 0    | 0      | -1               | 描述信息警告或交通标志类型，参考国标GB 5768.2和GBT 29100-2012 |
| description    | varchar | 100  | 0      | -1               | 事件描述                                                     |
| riskLevel      | tinyint | 0    | 0      | -1               | 风险等级                                                     |
| alertRadius    | tinyint | 50   | 0      | -1               | 影响范围                                                     |

### 交通数据

表名：TrafficFlow

| 属性名         | 类型    | 长度 | 小数点 | 必须（-1非必须） | 字段注释                                                     |
| :------------- | :------ | ---- | ------ | :--------------- | :----------------------------------------------------------- |
| id             | bigint  | 0    | 0      | 0                | 编号                                                         |
| timestampStart | int     | 0    | 0      | 0                | 开始时间戳（min），范围（0min~527040min）                    |
| timestampEnd   | int     | 0    | 0      | 0                | 结束时间戳（min），范围（0min~527040min）                    |
| deviceId       | varchar | 50   | 0      | 0                | 检测器编号                                                   |
| direction      | int     | 0    | 0      | -1               | 方向（针对同一个设备监测双向的情况）                         |
| laneNo         | int     | 0    | 0      | -1               | 车道编号                                                     |
| density        | double  | 0    | 2      | -1               | 密度（veh/km）                                               |
| speed          | double  | 0    | 2      | -1               | 速度（m/s）                                                  |
| volume         | double  | 0    | 2      | -1               | 流量（veh/h）                                                |
| congestion     | tinyint | 0    | 0      | -1               | 拥堵程度，分为5级，0为畅通，1为较畅通，2为缓慢，3为较拥堵，4为堵塞） |

表名：Vehicle

| 属性名    | 类型    | 长度 | 小数点 | 必须（-1非必须） | 字段注释                                                     |
| :-------- | :------ | ---- | ------ | :--------------- | :----------------------------------------------------------- |
| id        | bigint  | 0    | 0      | 0                | 编号                                                         |
| vehId     | bigint  | 0    | 0      | 0                | 雷视设备中唯一id                                             |
| license   | varchar | 20   | 0      | -1               | 车牌号                                                       |
| vehType   | varchar | 10   | 0      | -1               | 车辆类型，多选类型（二进制情况下用01去代表是否选择该位的属性）（1为客车，2为货车，3为公交车，4为出租车，5为大型车，6为中型车，7为小型车） |
| connected | tinyint | 0    | 0      | -1               | 是否为网联车，0为非网联车，1为网联车                         |

表名：Trajectory

| 属性名    | 类型   | 长度 | 小数点 | 必须（-1非必须） | 字段注释                              |
| :-------- | :----- | ---- | ------ | :--------------- | :------------------------------------ |
| id        | bigint | 0    | 0      | 0                | 编号                                  |
| vehId     | bigint | 0    | 0      | 0                | 车辆id                                |
| timestamp | int    | 0    | 0      | 0                | 时间戳（min），范围（0min~527040min） |
| lon       | double | 0    | 7      | -1               | 经度，精确到微度，范围（-180°~+180°） |
| lat       | double | 0    | 7      | -1               | 纬度，精确到微度，范围（-90°~+90°）   |
| ele       | double | 0    | 1      | -1               | 海拔高度，范围（-409.5m~+6143.9m）    |
| speed     | double | 0    | 2      | -1               | 速度（m/s）                           |
| direction | int    | 0    | 0      | -1               | 方向                                  |
| deviceId  | bigint | 0    | 0      | -1               | 所属雷视编号                          |
| postionX  | double | 0    | 2      | -1               | 雷视坐标系X轴位置                     |
| positionY | double | 0    | 2      | -1               | 雷视坐标系Y轴位置                     |

### 车路协同服务

表名：IVICSService

说明：车路协同服务。

| 属性名          | 类型    | 长度 | 小数点 | 必须（-1非必须） | 字段注释                                                     |
| :-------------- | :------ | ---- | ------ | :--------------- | :----------------------------------------------------------- |
| id              | bigint  | 0    | 0      | 0                | 编号                                                         |
| name            | varchar | 20   | 0      | 0                | 服务名称                                                     |
| serviceType     | tinyint | 0    | 0      | 0                | 服务类型，0为网联车专有服务，1为网联车普通服务，2为社会车辆服务 |
| timestamp       | int     | 0    | 0      | 0                | 触发时间戳                                                   |
| vehicleServiced | int     | 0    | 0      | 0                | 服务车辆数                                                   |
