# 车路协同路端系统的数据集NGSIM介绍

以下文章来源于智车科技，作者高斯yyds                                                   

# 导读

**车路协同**系统是基于无线通信，传感器探测等技术获取车辆和道路信息，通过车车通信（V2V），车路通信（V2I)实现信息交互和共享，从而实现车辆和路测设备之间的协调，实现优化使用道路资源，提高交通安全，缓解拥堵等目标。实现车路协同所需的硬件一般可分为车端设备和路端设备。车端设备OBU(OnBorad Unit)，主要负责与路端的通信，OBU还需要和车端的ADAS域控制器进行数据交互。路端设备RSU(RoadSide  Unit)，主要负责与车端OBU通信，另外还包含摄像头，毫米波雷达，激光雷达等感知设备，及数据处理所需的高性能计算单元。路端感知所使用的技术与自动驾驶车端所使用的技术类似，如使用深度学习，点云处理，多传感器融合等技术。

# 一、NGSIM

做自动驾驶或者图像处理的小伙伴一定很熟悉**KITTI**数据集。KITTI数据集的数据采集平台装配有2个灰度摄像机，2个彩色摄像机，一个Velodyne 64线3D激光雷达，4个光学镜头，以及1个GPS导航系统。所有传感器的数据需要进行坐标变化，最后统一转化到车载坐标系，当然**“视角”都是基于车辆**的。

如果做车路协同路端的研究，就必然需要**路端“视角”**的数据集，基于车端采集的数据集便不适用。目前来看，**行业内此类公开数据集较少**。笔者最近发现一个很适合做车路协同方向研究的数据集——**NGSIM**。

NGSIM 数据集是由研究人员通过一个叫做"**Next Generation Simulation**"的项目收集来的。该数据集覆盖了结构化道路的路口，高速上下闸道等车路协同研究的热点区域。该项目的研究人员对原始的视频信息做了后处理，生成了交通流中每辆车的行驶轨迹数据。数据集采集于美国的四个不同地区，分别是加州南向的US 101号公路，加州洛杉矶的Lankershim Boulevard地图, 加州埃默里维尔的东向的  I-80号公路，以及佐治亚州亚特拉大的Peachtree Street，下面介绍其中的两个区域，这两个区域也是车路协同中经常研究的场景。

# 二、路口通行场景

![图片](https://mmbiz.qpic.cn/mmbiz_png/InRzPPAWvxX3hf7ehquFiazZxpmkNSgxNheF0rqvUVvvWYjJCCHQevwkkVxsgKclqGygkACB6QsZhcFnibQO21rg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

图2是Lankershim  Boulevard地区的道路地图。该区域道路长约1600英尺（约487.7米），包含4个带有交通信号灯的路口，每个方向的道路包含3或者4条车道。摄像头采集到的原始视频数据时常约9个小时，分为早晚两个高峰录制。数据收集系统对视频中的车辆进行了感知和跟踪，如果跟踪精度和准度符合预期，则直接生成车辆运动轨迹点，并保存到数据库，否则需要进行人工修正之后再次保存。区域内车辆的轨迹点的保存周期为100ms(10Hz)。

为方便分类及过滤轨迹数据，需要对车辆的运动轨迹与道路的相对关系进行描述。下面定义了这些描述的关键词，使用这些关键词可以很方便的对每个路口，车道，区域等进行编号分类。

| **关键词**   | **含义**                                                     |
| ------------ | ------------------------------------------------------------ |
| Origin       | 驶入研究区域的路口，编号从101到111。即表明车辆是从哪个路口驶入这片区域的 |
| Destination  | 驶离研究区域的路口，编号从201到211。即表明车辆是从哪个路口驶离这片区域的 |
| Intersection | 十字路口。此片区域共包含4个路口，从南到北依次编号为1，2，3，4 |
| Section      | 分割区域编号。此研究区域被4个路口分割成5个小区域。           |
| Lane         | 道路中车道的编号。具体编号由上图所示。                       |

有了上述的这些定义，可以很方便的将任意一辆驶入或者驶离该区域的车辆轨迹描述出来。

# 三、匝道汇入汇出场景

3所示的这条公路是加州洛杉矶南北走向的交通大动脉——U.S. Highway 101。紧邻着U. S. Highway 101 和 Lankershim  Boulevard交互处，有一幢36层高的建筑，Universal City Plaza,  采集数据的摄像头就安装在这幢建筑上。摄像头采集数据区域长度约为2100英尺（约640米），包含五条车道（1~5号车道）。6号车道两端连接7号和8号车道，分别为匝道汇入车道和汇出车道。同样地，车辆轨迹点的保存周期为100ms (10Hz)。

 

![图片](https://mmbiz.qpic.cn/mmbiz_png/InRzPPAWvxX3hf7ehquFiazZxpmkNSgxNxNkChrVp0EqtJ2fqnanlZrw275T9lOB63VKsGCXngAhOaicr7cE87Ig/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

# 四、NGSIM 车辆轨迹数据类型

NGSIM数据集可导出为**csv**格式表单。该表单第一行字段含义如下表所示。需要**注意**的是，笔者并没有罗列全部的字段，只罗列了常用的，且不太好理解的加以解释。

| **字段**         | **说明**                             | **备注**                           |
| ---------------- | ------------------------------------ | ---------------------------------- |
| Vehicle_ID       | 车辆编号                             | 有可能会出现重复                   |
| Frame_ID         | 数据帧号                             | 与该路径点产生的时间相关           |
| Total_Frame      | 数据总帧                             | 某辆车被跟踪的生命周期（存在长度） |
| Global_Time      | UTC时间                              | 13位的标准UTC时间，精确到ms        |
| Local_X/ Local_Y | 采集区域坐标系的X/Y值                | 局部坐标系下的位置值，常用         |
| v_Vel / v_Acc    | 车辆的行进方向的速度和加速度         | 即运动方向的速度及加速度           |
| Lane_ID          | 车辆所在的车道编号                   | 见图2和图3中的1，2，3等            |
| O_Zone           | 驶入研究区域的路口，编号从101到111。 | 表明车辆是从哪个路口驶入这片区域的 |
| D_Zone           | 驶离研究区域的路口，编号从201到211。 | 表明车辆是从哪个路口驶离这片区域的 |
| Int_ID           | 路口编号                             | 共四个，由南向北序号递增           |

# 五、数据集使用示例

假设我们需要研究车辆通过路口可能的**运动模式(motion pattern)**, 那么首先需要对原始的数据根据不同的运动模式进行分类。未分类前，将所有通过该路口的车辆轨迹全部显示出来，如图4所示。

![图片](https://mmbiz.qpic.cn/mmbiz_png/InRzPPAWvxX3hf7ehquFiazZxpmkNSgxN1gJWXDbwCsVUQTsK3EXkUu6b99bSxXHy6Bkhy6Be6c2WeKBF2Cbm4g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

结合实际场景和生活常识，考虑车辆可能行进的方向，可将上图中的轨迹分类成8类运动模式。然后使用一些聚类算法，如K-MEANS等，可以对这些轨迹进行分类，为后面的模型训练做数据准备。图5展示了使用K-MEANS对原始轨迹进行分类后的结果，不同的颜色代表不同的运动模式。

![图片](https://mmbiz.qpic.cn/mmbiz_png/InRzPPAWvxX3hf7ehquFiazZxpmkNSgxN5a0choA9mfMgjofYSE99GOoGG4D17gUvZpa4z5yNpx5yzBenVD54Eg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

得到根据运动模式而分类的数据后，可以用这些分类好的数据分别建立模型，调试轨迹预测，规划等算法。

