# 6.1 软件总体结构

软件总体结构为一个平台五个体系。

“一个平台”是指公安交管集成指挥平台，它负责应急指挥调度、组织协调、决策支持和执行监督能力，实现城市公安交通指挥系统各子系统的功能集成和信息集成。

“五个体系”分述如下：

“交通态势监控体系”，负责汇集、梳理、加工、关联、展现交通路况、交通秩序、交通事件、施工占道、交通管制等整个城市路网的交通状态和警情状态；警力（警员、警车、指挥）分布状态；设备的业务内容和工作状态。

“交通信号控制体系”，负责区域交通协调控制、无电缆协调控制、单点控制、黄闪控制、人工控制功能等，基于短时和中长期交通流分析判态结果进行子区方案优化，达到整体通行量最大的效果。

“交通稽查防控体系”，负责交通违法采集及业务管理、车辆稽查布控、车辆通行记录报警、机动车查控分析等业务。

“交通信息服务体系”，负责交通态势信息的对外发布，包括交通诱导屏、交通广播电台、交通综合信息网站等，对外发布实时信息。

“交通业务管理体系”，负责设备设施管理、人员机构管理等智能交通管理平台所用基础性信息的维护或采集。

![image-20210817145403798](https://gitee.com/er-huomeng/l-img/raw/master/img/image-20210817145403798.png)

# 6.2 C/S结合B/S应用

集成指挥平台中以交通管控类应用为主的部分采用C/S模式实现，以数据分析展现类应用为主的部分采用B/S模式实现。

C/S应用地图访问机制为ARC SDE。B/S应用地图访问机制为栅格地图。

![image-20210817145424803](https://gitee.com/er-huomeng/l-img/raw/master/img/image-20210817145424803.png)

![image-20210817145436677](https://gitee.com/er-huomeng/l-img/raw/master/img/image-20210817145436677.png)

![image-20210817145442949](https://gitee.com/er-huomeng/l-img/raw/master/img/image-20210817145442949.png)

# 6.3 智能交通管理平台-支撑子系统-设备层的集成技术

![image-20210817145500796](https://gitee.com/er-huomeng/l-img/raw/master/img/image-20210817145500796.png)

# 6.4 客户端技术框架

统一的身份验证机制。智能交通管理平台功能较多，且由多个C/S软件和B/S软件组成。无论用户使用智能交通管理平台的C/S或B/S的哪个软件，只需要通过一个登录用户名和口令，即可实现用户登陆。同时，统一的权限管理也有利于系统管理人员进行统一维护。该系统主要用户群为支队相关科室的人员，同时包括交警支队各科室用户、公安局各科室用户。用户群数量较大，且分布在不同部门，统一权限管理是系统维护的明确要求。在集成指挥平台上，规划为统一权限数据定义，并提供统一权限访问方法。统一的权限定义规划满足了各子系统权限当前的功能授权和将来的权限变化需求。统一的webService权限访问方法简化了各系统对权限调用要求，实现了方法的复用性。

一机双屏模式。智能交通管理平台客户端应用需求为进行指挥调度操作时，要求同时进行GIS相关操作，如圈选交通事件发生点周边的警力、设备资源，已进行相关的资源调度。因此，本系统采用一机双屏的模式，一屏为业务信息项、业务流程操作，另一屏为GIS展现，方便指挥中心操作使用。

界面Dock风格。智能交通管理平台客户端主界面要求清晰展示众多信息（如：分门别类显示报警简要信息、警力设备资源信息、处警操作信息项和流程控制信息），要求能够让接处警席能一眼看全所有要关注的警情，然后在选择当前关注的事件项后逐层展开、递进处理。所以，该系统界面采用Dock风格，主界面功能区分隔明确，上方为功能菜单及快捷键区，左侧为事件区/设备区，下方为状态区，中间为工作区。支持窗口显示、漂浮、停靠、最小化，为用户最大化自己关注的信息提供方便。

采用工厂模式构建客户端框架。指挥调度采用C/S架构实现，客户端与服务端分担业务操作对计算机资源的占用，提供性能更好的指挥调度业务应用。但集成指挥调度涉及到众多的业务功能交互联动，必须采用良好的架构以实现交互联动间的松散耦合，为系统的实现、调试、发展奠定良好的基础。工厂模式的功能是使对象的创建和使用分离，因此用户只需要使用对象，而不需要管对象具体的创建过程，工厂模式是满足依赖倒转的，所以工厂模式中的用户层和对象创建层之间是通过一个抽象对象来连接的，也就达到了解耦的效果。由此构建的集成指挥调度系统C/S框架只是一个通过接口调用完成业务流转的“壳”，实际的执行体均为采用工厂模式加反射技术调用接口完整实现单个业务逻辑的dll集合。

# 6.5 应用服务端技术框架

采用工厂模式构建应用服务端框架。集成指挥平台应用服务端与客户端面临相似的问题，即与多子系统交互时的协议差异性，如：同为设备报警，但不同的设备具有不同的信息特性，导致消息体的差异化。基于同样的原因，应用服务的构建也采用工厂模式完成构建。

分布式应用。不同的项目需求对应不同的应用服务，不同的项目应用场景对应用服务产生不同的运行压力。所以，应用服务应可分可合、灵活部署，有效利用网络和计算机资源。分布式应用的支撑技术为消息总线机制和webService交互技术，它们将在集成技术中进行阐述。

服务层次化。完成业务应用，需要有领域业务逻辑服务，同时还需要有跨领域业务服务及与业务无关的通用服务。服务层次化有利于系统构建的简单化和组件复用性。服务层次化的支撑技术为消息总线机制和webService交互技术，它们将在集成技术中进行阐述。

# 6.6 数据格式

交通综合管理平台系统数据种类繁多，需要进行详细周全的数据设计。以下是针对交通指挥集成系统基础数据的基本属性提出要求，有标准的则遵循标准，没有标准的需要制定数据格式。

## 6.6.1 交通状况数据

临时数据：公路车辆综合布控系统检测的车辆占有率等，此数据不需要做长期保存。

永久数据：交通流量、阻塞程度、平均速度、占有率等。以上这些数据需要做长期存储。

## 6.6.2 GIS系统数据

地理信息数据存储格式要求符合对应的GIS系统格式。

GIS数据至少包括以下信息：

1）基础地理信息

基础地理信息包括政府机关、公安部门、医疗单位、学校、银行、邮政、消防、大型公共建筑、宾馆饭店、企事业单位、大型体育和娱乐场所、交通运输集散地、居民地街区、行政区域、水系、桥梁、村庄、乡镇、建筑物及其标注、公共交通等。

2）交通路网信息

交通路网信息数据主要有公路和城市道路。公路类型包括高速公路、一级公路、二级公路、三级公路、四级公路和等外公路；城市道路类型包括快速路、主干路、次干路、支路和其他道路；道路属性信息包括道路等级、道路长度、宽度、线形，路面性质，道路编码，路段隔离设施，车道划分，设计车速、容量等。路口有丁字路口、十字交叉路口、五叉路口和其他路口等。

## 6.6.3 交通设备信息

交通设备信息数据要求有以下基本信息：路口视频监控点，闯红灯违法自动记录系统，超速监测点，公路车辆监测记录（卡口）子系统场外设备点，诱导标志点等。

## 6.6.4 交警警力分布信息

交警警力分布数据包括、警力部署位置、警力数量、警力所属组织等信息。该类数据信息需要根据实际情况定期更新。

## 6.6.5 系统设备管理数据

指挥中心服务器、网络通讯、数据存储和其他辅助设备的运行维护信息。

## 6.6.6 交通信息统计数据

交通信息统计数据主要要求有以下几个部分：驾驶员统计数据、车辆统计数据、违法统计数据、事故统计数据、路口交通状况统计数据、道路交通状况统计数据、监测记录统计数据。

以上统计数据需要长期保存，保存按照时间段划分。

## 6.6.7 黑名单数据

针对不同的类型建立相关车辆及驾驶人黑名单，用于布控、比对。

## 6.6.8 辅助决策预案数据

预案指出现紧急情况时预先准备的方案，需要分门别类，针对不同的情况设置不同的预案。

## 6.6.9 数据字典

对通用的代码进行定义。

## 6.6.10 日志数据存储

记录设备、用户的登录连接及相关数据库操作等信息。