# 统一消息服务子系统

## 1.1 概述

统一消息服务子系统作为接口层，为各个子系统提供接口支撑，应用层通过接口调用访问数据，整体的架构如下：

![image-20210727155719415](https://gitee.com/er-huomeng/l-img/raw/master/img/image-20210727155719415.png)

**图**6.90**统一消息服务框架****图**

 

## 1.2 服务接口

### 1.2.1 公交优先通行系统接口

统一消息服务子系统为公交信号优先通行前台展示界面提供如下接口功能：

Ø 公交线路查询

提供公交线路的查询接口，返回公交线路详细信息。

输入：公交线路编号

输出：公交线路详细信息

Ø 公交车实时运行信息查询

提供各个公交线路运行的公交车实时位置信息查询接口，返回公交车的实时经纬度信息

输入：公交线路编号

输出：当前公交线路下所有公交车实时位置信息

Ø 路口信号灯信息查询

提供各个路口信号灯信息查询接口，返回信号灯实时状态信息。

输入：路口编号

输出：当前路口信号灯实时状态信息

Ø 公交信号优先策略查询

提供各个路口信号灯策略查询接口，返回详细的策略信息

输入：路口编号

输出：当前路口信号灯策略改变详细信息

Ø 公交车历史运行轨迹查询

提供公交车历史运行轨迹查询接口，返回公交车历史轨迹信息。

输入：公交车编号、日期

输出：指定时间的公交车运行轨迹信息

Ø 公交信号优先历史策略查询

提供公交信号优先历史策略查询接口，返回各个路口信号灯的历史策略变动信息。

输入：路口编号、日期

输出：制定日期的路口信号灯策略改变信息

 

### 1.2.2 城市交通运行监测平台接口

统一消息服务子系统为城市交通运行监测平台提供如下接口功能：

Ø 整体交通运行指数查询

提供整体交通运行指数查询接口，返回指定查询日期的交通运行指数信息。

输入：查询日期

输出：指定日期的交通运行指数

Ø 区域交通运行指数查询

提供各个区域交通运行指数查询接口，返回指定区域指定日期的交通运行指数信息。

输入：日期、区域id

输出：指定日期和区域的交通运行指数

Ø 交通调查指标数据查询

提供交通调查指标数据查询接口，返回指定路段的交通调查指标数据，包括交通量、平均时速、饱和度等

输入：路段

输出：实时输出指定路段的交通调查指标数据

Ø 交通调查指标历史数据查询

提供交通调查指标历史数据查询接口，返回指定历史日期的交通调查指标数据。

输入：路段、日期

输出：输出历史日期指定路段的交通调查指标数据

Ø 自适应信号配时策略查询

提供自适应信号配时策略查询接口，返回实施了自适应策略的路段和路口信息。

输入：无

输出：实施了自适应策略的路口信息

Ø 干道绿波策略查询

提供干道绿波查询接口，返回干道绿波带信息。

输入：无

输出：干道绿波带信息

Ø 长途客车详细信息（实时位置、驾驶员信息、监测报警信息）查询

提供长途客车详细信息查询接口，返回长途客车实时位置、驾驶员信息、监测报警信息。

输入：客车编号

输出：客车驾驶员详细信息、车辆实时位置信息、监测报警信息

Ø 危化品车详细信息（实时位置、驾驶员信息、监测报警信息）查询

提供危化品车详细信息查询接口，返回危化品车实时位置、驾驶员信息、监测报警信息。

输入：危化品车编号

输出：危化品车驾驶员详细信息，车辆实时位置信息，监测报警信息

Ø OD分析结果信息查询

提供OD分析结果信息查询，返回经过大数据计算后的OD信息

输入：无

输出：OD分析结果

Ø 嫌疑套牌车分析结果查询

提供嫌疑套牌车分析结果查询接口，返回经过实时计算后嫌疑套牌车数据

输入：无

输出：嫌疑套牌车列表

Ø 各区域尾气排放信息查询

提供各区域尾气排放信息查询接口，返回经过分析计算后各个区域尾气排放的信息

输入：区域编号

输出：区域各个时间段尾气排放信息

Ø 交通资产信息（基本信息、实时状态）查询

提供交通资产信息查询接口，返回交通资产的基本信息、实时状态等数据。

输入：资产编号

输出：资产基本信息，资产实时状态