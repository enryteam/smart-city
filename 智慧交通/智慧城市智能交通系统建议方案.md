- [智慧城市智能交通系统建议方案](https://blog.csdn.net/llooyyuu/article/details/109894360)

# 第1章 设计原则

 市公安交通集成指挥平台设计方案遵循以下设计原则：

经济性

在充分满足系统运行技术与性能要求的前提下，尽量采用性能价格比高的产品与技术，并在项目实施过程中本着厉行节约的原则，精打细算，以保证项目建设的合理开销。

实用性

充分利用成熟的先进技术。避免盲目追求新技术，同时又要防止系统处理能力不够的现象出现。应用软件符合管理需要，易于维护，系统实用。

先进性

通过引进、二次开发和整体集成，使市公安交通集成指挥平台在国内同等城市规模中居于先进水平，并在系统实际运行过程中，建立紧密结合城市交通管理实际的科学化、现代化管理运行机制。

可靠性

方案尽量采用标准化优质产品，并在系统集成过程中对硬件设备安装、操作系统应用、网络连接、数据库设计完善的故障检测、诊断及处理策略，保证系统的稳定性和可靠性。

整体性

充分考虑各个系统之间的相互联系及整合，尽可能提高系统的集成度和整体利用效率。

开放性

遵循有关国际标准、国家标准和行业标准，系统间具有良好的互联、互操作能力。

可扩展性

方案系统结构易于扩充，以适应今后可能出现的较大任务负载。系统设备及软件向下兼容，以保护产业上的原始投资。

可操作性

界面友好，充分考虑操作人员的特点，使数据处理工作简单、方便、快捷，业务流程清晰，符合常规业务处理习惯。系统数据维护方便，备份及数据恢复快速简单。

# 第2章 设计依据

略

 

# 第3章 平台软件系统设计

智能交通网络化图像监控系统集成管理平台是一个融合公安信息管理业务、智能交通应用、视频图像监控、高速网络传输、高性能比对计算等多技术、多系统集成的复杂系统。

该系统平台是建立在公安视频信息专网系统协议层之上，可以作为各级公安交通指挥系统的统一信息服务平台，在公安派出所、区公安局、市公安局和省公安厅之间实现了实现信息授权交换与共享。平台通过对采集到的静态与动态数据分析加工处理，来实施治安监控、交通管理控制和诱导。能够及时对交通事件进行处理并通过多种渠道将治安、交通信息发布给各级公安部门。

整个平台的建设根据各警种各业务部门的职能要求并结合信息共享要求进行设计，首先考虑了满足业务部门的需求，包括系统结构、功能、对信息的内容要求和信息处理、发布等方面内容；其次考虑了信息共享的需求，平台预留了大量与公安交通已有应用系统的数据接口。

## 3.1 系统设计思路

智能交通网络化图像监控系统集成管理平台的设计思路如下：

首先就是在功能设计上，采用了模块化设计，采用了松耦合的方式实现应用系统、逻辑管理、标准接入、物理资源的联系。数据与程序相对独立，程序与控制参数相对独立，以便于系统的调整与升级，适应不断发展的管理需求。保证各项技术可以不断的更新和升级以维持系统的先进性，使系统软件具有较长的生命周期。

其次是标准。标准是平台整合的基础。主要体现在统一编码的强制标准性、应用开放接口及中间逻辑层的强制标准。此外标准还涉及制度和规章。

强化物理层。根据设计的需要追加相应的设备投入，保证系统的应用强度。

强化平台管理。重点是建立全网统一、分级管理的权限管理、流控和调度系统。建立协调交互支撑系统。

强化应用。系统将建立统一的、标准的、开放的调用接口，供各应用系统调用，同时将建立预案视频监控支撑系统和警视联动系统等应用。

## 3.2 系统设计亮点

智能交通网络化图像监控系统集成管理平台是一个融合公安传统的图像监控业务和新兴的智能交通管理业务的集成管理平台，在整个平台的设计开发过程中，尽可能追踪了目前业界主流的技术框架和技术方法：

首先，采用了基于面向服务的体系架构（SOA）技术进行主体架构设计，以SOA（Service Oriented  Architecture）面向服务的特性，通过定义良好的服务接口实现各子系统之间的松耦合，使平台既可以包容现有的应用又能满足未来新的应用需求，实现信息的高度集成。

其次采用了基于Web Service的面向服务集成框架，实现了各个子系统平台之间的应用、服务的集成，为用户提供了一个统一的面向服务的应用集成管理界面。

**主体的架构设计**

在进行智能交通网络化图像监控系统集成管理平台的架构设计时，我们面临着如下的挑战：如何保证传统治安图像监控业务与新兴的智能交通管理业务的有机集成及信息共享和关联，实现该平台既可以包容现有的应用又能满足未来新的应用需求，实现信息的高度集成，使得基于不同协议、针对不同应用需求实现的应用系统能够很好地进行信息交互，让应用系统变得更有弹性、更快速地响应业务需求。

我们的选择是采用业界逐渐成熟的面向服务的体系架构（SOA）技术。SOA可以将应用程序的不同功能单元定义为服务，服务之间通过定义良好的接口和契约进行联系，接口是采用中立的方式进行定义的，独立于实现服务的平台，从而使得构建在各种各样的系统中的服务能够用统一和通用的方式进行交互。这样一方面能够将遗留系统整合到新的应用，新开发系统采用符合规范的接口设计后也能够很好地整合到应用当中。这些系统松散耦合，最终形成一个可扩展的新系统。

**业务集成的Web Service框架**

集成平台采用了基于SOA的体系架构设计，但SOA作为一种体系架构的设计风格，在针对具体的诸如治安监控、智能交通卡口系统等业务应用领域，我们该如何实现这种面向服务的体系架构呢？

综合考虑各个可选的技术体系，在CORBA、DCOM、.Net、J2EE、Web  Service等多个选择项中，最终我们认为采用.Net结合Web Services技术是实现整个平台SOA架构的最好选择。一方面Web  Service是标准的，它保证了来自不同的Web服务即使运行在不同的平台上，底层的实现机理不同也可以顺利交互和共享，这是传统技术所不具备的，特别适合于智能交通集成平台这种复杂的应用环境。更为突出的是Web服务的定义和实现是分开描述的，即它的松耦合性，可以方便地修改Web服务内在的实现而不会对现有的系统造成破坏，这极大地促进了信息件架构的灵活性。基于Web Service这种标准的成熟和应用的普及为广泛的实现SOA架构提供了基础，而.Net的开发成熟度更为实现Web  Service的成熟提供了催化作用。

在平台中，我们特别在业务应用领域进行了Web Service的集成应用，主要有：**外场设备接入服务、数据检索与数据共享等中间件服务**。

**高性能的外场设备接入服务设计**

平台实现了基于Web Service的独立外场设备接入服务层。一方面，独立的接入服务层，清晰地定义了中心平台与外场设备的边界。另一方面，它把接入功能从Oracle数据库的侦听服务进程中解放出来，由于采用独立的主从架构设计，能极大地提高集成平台的强壮性。

整个接入服务使用Web服务来集成前端的各种外场设备信息。采用的专用ITSIP协议实现前端外场数据接入而导致的接入其他厂家外场设备困难的问题。

另外，整个外场设备数据接入服务的架构采用主/辅服务的方式：

主服务一直保持实时请求的接收状态，超过一定可配置的阈值后，主服务发出分流处理的消息，并从主队列中分流部分请求记录

消息侦测线程接收该消息，并启动辅助服务

辅助服务接收分流的请求记录，并持续处理，一直到处理完成后退出

**结合Ajax和RIA技术的更好用户体验**

B/S计算模式随着互联网的爆发性增长，也同时成为目前应用软件最主流的运行模式。但相比传统C/S程序丰富的界面特性，纯粹B/S页面的显示技术也为集成平台的展现和用户体验带来了很大的困惑。

采用了纯粹的B/S页面显示技术,为了保证纯粹B/S页面显示更好的用户体验，我们大量采用了Ajax和RIA技术来增强软件界面的友好性：

平台大量采用了AJAX技术，用于无抖动刷新；

Ajax技术用于更平滑地显示实时过车信息和实时报警信息，实现页面的无抖动刷新，增强了用户视觉体验；同时在图片切换过程中减少等待时间。

采用Flex技术，实现更多的RIA（RichInternet Application）特性，来实现过车、报警等图片信息的展现。

## 3.3 遵循的标准与接口

**1.** **互联接口和通信协议**

为了在跨区域的社会治安动态视频监控系统中，实现不同设备及平台之间的互联、互通、互控，实现视频资源的共享和各警种之间的协同作战，平台完全按照《跨区域视频监控联网共享技术规范》（DB33/T629-2007）规定的视音频传输要求、联网接口技术要求和设备用户地址编码要求进行系统建设。。

**2.**  **设备接口和控制协议**

保证在外场设备之间进行模拟联网的矩阵有足够输入和输出接口，PTZ的控制协议符合PELCO-D标准。

**3.** **视音频编码标准**

整个平台的视音频编码采用统一的标准。联网系统的视频压缩编解码标准采用MPEG4/H.264/AVS;音频编解码标准采用G.711/G.723.1/G.729;重要的实时图像和历史图像在视音频编码算法中采取防篡改安全措施。

**4.** **设备用户地址统一编码标准**

设备用户地址统一编码：为了确保设备与用户正常接入平台，保证系统平台建设质量,设备用户地址编码规范符合DB33/T629-2007要求，具体要求如下：

![img](https://img-blog.csdnimg.cn/20201121121400817.gif)

## 3.4 系统总体框架

### 3.4.1 系统总体架构

智能交通网络化图像监控系统集成管理平台是综合性、专业性很强的信息整合、业务管理与决策支持平台。整个平台综合运用了通讯、计算机、网络、信息处理等技术，实现了信息资源管理、设备管理、用户管理、网络管理、安全管理等业务功能。

作为整合治安监控基础设施、交通管理基础设施、网络与计算机、交通管理信息应用系统的综合信息管理平台，其总体框架包括设备接入层、转发存储层、中间件层、业务应用层、用户界面层五个层次，如下所示：

![img](https://img-blog.csdnimg.cn/img_convert/27f9c24f553d116b0d6e27c42b15bb1f.png)

**设备接入层：**主要负责与外场设备、分局中心系统进行数据交互；完成采集图片/数据的入库存储、数据协议转换、数据预处理及控制信息发送功能；

**转发存储层：**主要负责业务数据以及图片文件的存储和管理，负责实时视频图像的转发和历史图像的存储，数据库软件采用ORACLE, 采用RAID5磁盘阵列作为存储介质，采用负载均衡的策略将转发、存储、比对、查询任务分配到多台服务器上。

**中间层：**是支撑业务应用中间件服务层，主要负责数据检索引擎、数据共享服务和GIS访问等功能；

**业务应用层：**是基于中间件层之上进行的各种业务处理、运算和管理服务层，包括实时监控、录像追踪、违章审核、布控报警、信息导入、GIS应用、查询统计、流量分析、车辆轨迹、全网协查、警情案情、系统对时等业务处理功能，同时提供丰富的系统配置管理功能；

**用户界面层：**提供友好、易用的人机交互界面。

### 3.4.2 系统网络架构

大华智能交通综合信息管理平台主要是基于公安网部署，整个网络结构分为前端采集层、数据传输层、数据接入层、中心数据处理层、用户应用层等五个层次。具体网络结构如下图所示：

![img](https://img-blog.csdnimg.cn/20201121121400817.gif)

1）前端采集层：通过前端外场设备：智能卡口系统、电子警察系统、测速抓拍系统、视频监控系统等，采集过车数据、道路违法数据、道路监控数据等，并将这些信息上传到数据接入层。

2）数据传输层：主要是指基于公安网络或运营商网络的数据传输网络。

3）数据接入层：主要是实现接入前端外场设备采集的数据信息，并进行分类存储。该层作为中心管理平台与前端外场系统的信息转换枢纽与集成核心，主要用于存储各项交通管理业务信息的交换标准、接口规范，并通过信息交换平台完成业务处理与管理、接口交互的数据整合，建立综合应用的数据模型，为上层应用提供有关道路交通管理的业务驱动模型和决策支持数据。

4）中心数据处理层：在信息接入代理层的信息交换整合的基础上，按照道路交通管理的业务管理、辅助决策、信息发布的要求，提供综合业务信息管理、信息展现与应用、辅助决策支持等服务。

5）用户应用层：主要提供用户的访问接口和统一应用门户。

此外，中心数据处理层通过安全隔离设备（一般是网闸），在保证安全的前提下，与公安八大基础信息资源库进行交互，完成智能交通综合业务信息的共享利用。

## 3.5 系统平台组成

智能交通网络化图像监控系统集成管理平台各软件模块组成如下：

系统管理服务软件(CMS)；

视频流媒体转发服务软件(VMTS)；

视频流媒体集中存储服务软件(VSS)；

WEB远程管理软件(WMS)；

GIS系统集成模块(GIS)；

网络数字矩阵软件(SNVD)；

智能卡口接入软件模块(BAS)；

市局级联网关服务模块；

### 3.5.1 系统管理服务软件(CMS)

作为一个规模庞大，运行相对独立的公安专业系统，系统管理服务软件是一个基于数据库的后台管理信息软件，是系统的核心业务服务器。负责处理监控的业务逻辑，进行权限等控制。根据业务逻辑需要，会发送命令给VMTS、VSS等服务器进行处理。

### 3.5.2 视频流媒体转发服务软件(VMTS)

视频流媒体转发服务软件能够对多客户端复用相同现场图像的流媒体转发管理和现场流媒体带宽限制管理，保证有限带宽下的多路同时访问和降低现场存储设备的网络负荷。

视频流媒体转发服务器支持视音频流的转发，支持网内多用户对一个音视频流的访问，实现有多个网络客户端同时访问同一远程画面时，可以通过视频流媒体转发服务器进行转发，从而在网络上只占用一个通道的资源。

上级单位需要查看下级单位图像时，宜访问视频流媒体转发服务器，不宜直接访问网络带宽资源有限的下级单位，从而解决多级浏览级联的问题。具体功能要求如下：

1、流媒体转发管理和现场流媒体带宽限制管理，管理路数不限，单机支持并发转发≥200路D1图像，流媒体服务器应支持音视频流的转发；

2、支持分布式部署流媒体转发设备，可以对客户端IP段和流媒体带宽进行有效的管理；

3、能够解决多级浏览级联问题，需要查看越级机构的图像时，可以直接访问流媒体服务器，而不用都去直接访问网络带宽资源有限的下级机构，从而解决多级浏览级联的问题；

4、支持动态IP变更自动捕捉、修正相关设置参数；

5、流媒体服务支持CLUSTER技术，并且具有网络自适应能力，能适应大并发量的视频流传输与存储；

### 3.5.3 视频流媒体集中存储服务软件(VSS)

视频流媒体集中存储服务软件能够实现在监控中心集中录像功能，包括中心存储管理、录像备份管理和删除管理等，能够适用不同厂商的产品，用于解决动态视频监控系统中前端设备远程数字监控中心数据的存储问题。

存储服务系统支持：中心存储、前端存储等多种存储方式；支持自动存储、周期存储、计划存储、手动存储等多种存储策略和存储策略的配置功能；支持ASF流媒体文件格式的存储和RTSP实时流媒体国际协议的回放。具体功能如下：

1、软件可以对全网的设备进行计划存储、报警存储配置；

2、集中存储（备份）管理前端设备的实时图像和历史录像，并提供集中检索服务，管理路数不限，单机支持并发存储≥200路图像(D1格式)；

3、中心集中录像库设置，可设置需要备份的录像时间段和备份盘符，同时可以查看某路图像指定日期的录像内容；

4、软件具备可执行录像计划和任务调度引擎，(目前一二类监控点建设只录像一次，不具备补录条件，三类监控点建设时再考虑补录，建议删除)；

5、系统维护服务器将定时检查磁盘的情况，进行清盘任务、自动导出等功能；

6、提供分散集中相结合的存储方式，但采用统一的检索服务，实现对全局范围所有信息的集中检索，检索的条件可以自行定义。

### 3.5.4 WEB远程管理软件(WMS)

Web远程管理软件主要包括用户管理、日志管理、报警管理、系统对时、设备管理等方面的管理及应用，各功能如下：

用户管理：系统管理员通过此功能，完成对用户进行名称、密码、权限管理、可以对用户做增、删、改、查功能。并可完成用户的名称、密码、权限及计算机IP绑定功能。

日志管理：该模块对系统运行的所有状态，包括操作、调用、控制、调试等等均进行运行日志记录，其记录由系统管理员进行操作和管理。日志记录的大小由配置模块设定，先进先出。

报警管理：对中心应用系统的应用软件、接入及交换处理系统设备故障和检测器故障进行监测，故障发生时通过异常信息显示进行报警并生成故障记录；故障记录保存在日志文件中，可以方便进行查询。操作员确认后取消报警。

系统校时：支持NTP校时功能，保证整个系统具有一个标准一致的时间，确保所有的业务子系统准确的时间同步，保证系统联动的实时性、准确。

设备管理：对系统设备进行管理，根据需要可以增加、删除、编辑设备。

设备状态监视：可以提供直观的设备列表界面，对综合接入及交换处理系统设备状态进行监视。

### 3.5.5 GIS系统集成模块(GIS)

1. 实现对电子地图的各种操作，包括放大、缩小、全图、移动、打印、点选、框选、不规则选择等操作，具备鹰眼功能。

2. 可以中心定位方式快速定位到派出所或社区警务室。

3. 查询定位：可以根据用户输入的视频名称关键字搜索符合的结果，并提供定位展现。它包括地物查询和业务数据查询：

地物查询：针对地图内容，输入地物名称关键字，得到列表，并可以实现对其定位操作。

业务数据查询：选择已经录用的数据类别，输入关键字得到结果列表，并实现对其定位等操作。

4. 周边查询：可以根据用户输入的街道名称、建筑名称等，查找一定范围的数据类别，并具有一定的统计功能。点状周边查询：比如查询某个建筑周围100米的社区警务室。线状周边查询：比如查询某条街道两边100米的联防点。面状周边查询：比如查询某社区周围100米的治安点。

5. 区域查询：可以根据已有的区域信息调出该区域的所有需要查找的数据类型。比如查询某区域的所有监控点信息，则系统就显示所有的监控点地图位。

6. 专题图展现：提供按照一定条件的某个专题的地图展现，比如监控专题图、警力分布专题图等，以饼状图为主。

7. 警力搜寻: 点击事发点位置，自动获取附近的警力点位置和距离，包括移动巡逻车和固定的警务室。

### 3.5.6 网络数字矩阵软件(SNVD)

网络数字矩阵软件可以达到监控中心的网络数字矩阵软件专用客户端软件，支持更加灵活的解码卡与矩阵卡输出控制。

支持对其他标准客户端软解码VGA输出的协同控制，支持管理最大多台客户端软解码输出上电视墙。

提供本机显示控制，提供电子地图、分组、轮巡、联动等多种控制方式。

提供矩阵卡输出模拟视频信号复合方式控制（单画面、多画面、画中画）。

### 3.5.7 智能卡口接入软件模块(BAS)

系统能接入智能卡口交通监控，形成融合的综合应用平台，智能卡口的接入采用webservice接口方式，既保证大华自产设备的接入，也可实现与其他公司卡口平台的接入。

车辆图像和车辆信息采集识别：采用卡口代理服务器接入的方式，接收转发过来的卡口的车辆图像和车辆信息。

车辆信息集中存储：将各卡口的车辆图像和车辆信息集中存储到中心磁盘阵列。

布控和撤控：将布控内容添加到系统布控信息数据库表中实现布控；对已布控内容实现撤控；布控和撤控后能提示操作结果；能响应联网系统集成管理平台的布/撤控指令。

车辆信息比对监测：将采集到的车辆信息与布控信息数据库表中的布控内容进行自动比对。应比对结果符合条件时，应能及时发出相关警示并发送至联网系统集成管理平台。

自动报警联动：超速报警可以设置超速限值，当通过车辆的速度超过限值时，能现场报警和远程报警，联动动态视频预案。布控缉查车辆报警：可以设置布控缉查车辆号牌，当系统识别出来的车辆号牌结果符合条件时，能现场报警和远程报警，联动动态视频预案。

查询统计：能对车辆信息的内容进行精确或模糊查询、统计、生成报表，并能输出数据。能为联网系统集成管理平台提供车辆数据的查询统计服务，能够按车道和时段进行车辆流量统计，并以报表形式输出。查询统计应支持Web查询方式。

系统设备状态监测：能监测系统中设备运行时的实时状态，并能向联网系统集成管理平台提供系统设备工作状态的查询服务。

卡口历史录像提取：根据卡口抓拍图片的识别结果，提供车牌信息和时间组合进行录像智能检索的接口，用户端根据车牌信息进行历史录像的点播和下载。

系统设备状态监测：车辆轨迹分析、流量分析统计功能。

### 3.5.8 市局级联网关服务模块

按照《跨区域视频监控联网共享技术规范》DB33/T629-2007第二部分联网单元技术要求，分局数字视频共享平台向市局提供了联网接口（控件或SDK开发包），分局开放相应代码、编码格式和控制协议，提供与市局联网软件接口模块，市局可以通过分局联网服务器（网关服务器）访问和控制分局数字监控图像。