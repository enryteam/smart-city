- [智能网联汽车（十五）——测试与评价](https://zhuanlan.zhihu.com/p/380445911)

如何衡量自动驾驶车辆的能力，回答这个问题需要构建自动驾驶测试与评价体系，通过指标化的评价项目来全面系统评价自动驾驶能力，指导自动驾驶车商用量产工作。

![img](https://pic3.zhimg.com/80/v2-5c553f73beccc4572f1b084b624bb606_720w.jpg)

自动驾驶测试与评价体系

## 一、测试场景库

自动驾驶的实验室环境测试、车辆在环测试以及实际道路测试都是以场景库为基础，通过对选取特定场景进行测试，获得具体场景对应测试数据，从而进行分析。因此自动驾驶测试场景是自动驾驶的基础，能为自动驾驶能力提供有效验证，为自动驾驶车辆上路提供主要的依据。在自动驾驶快速发展的情况下，确立自动驾驶场景库的标准十分迫切。

场景库应包含各种类型，各种维度，涵盖主要典型场景和各种极端场景，如不同道路类型等级、交通标志和标线识别、天气状况、障碍物识别与应对、人机交互、最小风险状态等。

### 1.道路

![img](https://pic2.zhimg.com/80/v2-7610c3d387b2bb066f5075f5fa9beea1_720w.jpg)

场景库——道路

### 2.交通规则

![img](https://pic3.zhimg.com/80/v2-b8c40911c6b7c2dd281dd34ab3208e16_720w.jpg)

场景库——交通规则

### 3.临时交通环境变化

![img](https://pic2.zhimg.com/80/v2-41747715af7ae287d4efe1072784bde1_720w.jpg)

场景库——临时交通环境变化

### 4.障碍物识别及应对

![img](https://pic1.zhimg.com/80/v2-d3b319da34959eb640aac2bb1be2de30_720w.jpg)

场景库——障碍物识别及应对

### 5.自然环境

![img](https://pic2.zhimg.com/80/v2-9c694398061f6f506acede6c70ed4131_720w.jpg)

场景库——自然环境

### 6.人机交互

![img](https://pic2.zhimg.com/80/v2-8af9fb126a637e6042493d1a6e0bc2bd_720w.jpg)

场景库——人机交互

### 7.安全性及最小风险状态

![img](https://pic4.zhimg.com/80/v2-551239099c6acd0c58dbdc57541a6457_720w.jpg)

场景库——安全性及最小风险状态

## 二、自动驾驶测试体系

百度自动驾驶测试体系可以分为“实验室阶段测试”“车辆在环测试”“道路在环测试”三大部分。

![img](https://pic4.zhimg.com/80/v2-445164e3b0c787eec5fcc20e1fe7e263_720w.jpg)

自动驾驶测试体系整体框架图

### **1.实验室环境测试**

实验室阶段测试目的是在离线情况下完成对自动驾驶系统的测试，包括模型的训练评估、各软件模块的测试、仿真测试、集成测试、硬件测试、硬件在环测试等。实验室阶段测试的特点是利用计算机在实验室环境下进行低成本快速大量的测试分析，检验软件和硬件系统的功能情况、可靠性、资源占用情况等，从而为后续车辆在环测试和道路在环测试节省成本和时间，提高测试质量和效率。

1）软件在环测试（SIL）

在自动驾驶阶段，不仅仅是控制模块，还涉及更多的软件模块，例如感知模块、定位模块、决策规划模块、高精地图模块等，每一个模块都需进行在环测试。传统软件在环工具无法解决这个问题，因此在自动驾驶阶段，软件在环的关键工具是一个离线仿真系统，可以同时离线访问每个模块并实时生成车辆状态反馈。

软件在环测试是利用计算机和各种系统工具，针对自动驾驶系统不同模块算法进行的测试。其目的是测试自动驾驶系统不同模块算法运行状况、模块功能、集成情况、资源占用等，并对各种场景进行仿真测试。软件在环测试是后续测试阶段的先决条件。通过软件在环测试，可以加快算法迭代，在前期能够快速发现问题解决问题，从而节省研发时间和成本，提高开发效率。

2）硬件在环集成测试HIL

硬件在环集成测试技术（HIL)是自动驾驶车集成测试阶段一项重要测试技术。它介于模块测试和真实道路测试之间，在自动驾驶车测试链条当中起到承前启后的重要作用。硬件在环集成测试在试验室搭建出一个半实物仿真的测试平台，搭建尽量接近真实道路的行车环境。相比于软件仿真器测试平台，硬件在环测试技术能在自动驾驶车系统集成的角度，实现前端传感器的硬仿真介入。在实现前端可控传感器仿真的基础上，HIL测试能够测试覆盖到自动驾驶车系统中的多个主要模块，包含预处理、感知、定位、决策控制等部分。以数据驱动方式组织的集成链条测试，可以真正打通端到端的自动驾驶车离线测试能力。以真实道路测试记录的数据为基础，通过HIL测试技术还原场景，将被测系统放置于接近真实物理世界的测试环境中去，实现了虚拟场景仿真到全传感器仿真场景的突破。

### **2.车辆在环测试**

车辆在环测试（VIL)基于半实物仿真技术思想，是真实车辆和虚拟仿真的联合测试系统。例如可以实现在一个封闭场地内实现任意开放道路的集成测试，实现大部分的真实测试需求，并能对2D、3D感知环境进行精确仿真控制。VIL在封闭场地内最大限度还原开放道路的场景，降低了实际道路测试风险性，降低测试的成本和时间。具体来说，VIL测试具有如下特点：

- 实现快速的场景及驾驶测试；
- 高效地验证各控制器的功能；
- 降低实车测试的难度和风险；
- 减少交通事故和风险；
- 减少对场地、真实交通和试验车辆的需求。

### **3.道路在环测试**

#### 1）封闭测试场测试

自动驾驶车辆在上路之前需首先在封闭测试场完成各种场景测试。封闭测试场测试的目的在于检测自动驾驶车辆的基本功能和软硬件系统运行情况，并进行简单基础场景的测试如直行、转向、红绿灯识别等。封闭测试场测试可以及早发现自动驾驶系统和车辆基本功能等方面的问题，避免进入开放道路测试出现事故，从而降低风险，同时节省时间和成本。

#### 2）半开放道路测试

在进入开放道路测试之前，自动驾驶车辆还需要在半开放道路上进行测试。所谓半开放道路是指有可控的规模有限的社会车辆和行人通过的道路。一般选取车速较低、交通密度较低的园区作为半开放道路，其中有社会车辆和行人通过但流量可控，相比实际开放道路场景要简单。部分半开放道路包括工业园区、有一定规模的驾校、区域测试场等。

#### 3）开放道路测试

开放道路是指社会车辆和行人通行的道路，场景随机多变，交通状况复杂。开放道路测试是道路在环测试的最终环节，也是自动驾驶车辆完成测试经过的必要环节。开放道路测试可以更加全面真实地测试自动驾驶车辆在各种复杂场景状况下的运行状况以及对于危机情况的化解，对车辆的运行、系统工作情况、各模块功能、体感等各维度进行综合测试。

## 三、评价标准

### **1.仿真环境**

仿真测试，是指对自动驾驶系统在计算机里进行虚拟场景的测试。仿真测试目的在于

测试自动驾驶系统在各种虚拟场景下的感知、决策和控制能力。通过仿真测试能够复现实际情况下各种可能场景，从而测试自动驾驶系统的决策控制能力，发现问题，避免问题进入后续测试环节，从而降低风险提高开发效率，是自动驾驶车辆安全上路的必要条件。仿真环境测试阶段评价指标分为定位、感知、预测、决策规划和控制5个方面，每个方面包含具体的测试指标。

![img](https://pic4.zhimg.com/80/v2-8018da02ad8577a8343efa5f169df79b_720w.jpg)

仿真环境评价指标

### **2.道路测试**

道路测试指标主要分为环境感知能力、执行能力、紧急处置能力和综合驾驶能力，具体分为26个测试指标，依据《北京市自动驾驶车辆道路测试能力评估内容与方法》规定测试指标具体内容及要求如下。

![img](https://pic3.zhimg.com/80/v2-31073a3a617057116b21444f4ad807e2_720w.jpg)

道路测试指标

### **3.体感**

在自动驾驶过程中，乘客是重要的一部分，乘客的舒适度同样是评价自动驾驶水平重要的指标，因此在自动驾驶评价体系中应当建立体感指标的评价体系。在车辆行驶过程中，影响乘客舒适度的因素主要包括纵向加速度，纵向加速度的变化率，横摆角速度，横摆角速度的变化率，曲率以及曲率变化率等。

## 四、国内外道路测试场

随着智能网联汽车的发展，无论仿真实验情景多么复杂，也无法代替真实的路测。作为评价和检验汽车质量和性能的测试场，也需要成为发展的重点。智能网联汽车测试场不同于传统汽车测试场，智能网联汽车需要在专属的场地测试，应当具备丰富的场景，完善的测试功能以及通行能力，试验做到保密，测试数据可靠等，测试重点是考核车辆对交通环境的感知和应变能力。

美国、欧盟、日本等汽车工业发达的国家和地区都纷纷开展智能网联汽车测试示范区建设，包括美国的M-City,瑞典AstaZero、英国Mira City Circuit、西班牙IDIADA升级建造的测试场日本JARI改造建设的测试场等。

国内针对智能网联汽车测试场的建设仍处于摸索阶段，目前主要集中在北京、上海、重庆等地。