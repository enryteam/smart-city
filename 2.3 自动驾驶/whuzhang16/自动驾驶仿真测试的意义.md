- [自动驾驶仿真测试的意义_whuzhang16的博客-CSDN博客](https://blog.csdn.net/whuzhang16/article/details/111038603)

### **1.1 自动驾驶商业化面临路测数据匮乏的挑战**

[自动驾驶](https://so.csdn.net/so/search?q=自动驾驶&spm=1001.2101.3001.7020)汽车在真正商业化应用前，需要经历大量的道路测试才能达到商用要求。但作为新兴事物，自动驾驶汽车仍面临着大量问题需要克服，如道路测试的时间成本、各国对于自动驾驶的法律法规容忍度、极端场景及危险工况的测试安全性、各国道路交通环境及习惯不同等问题，都给自动驾驶系统研发测试带来诸多困难。

采用路测来优化自动驾驶算法耗费的时间与成本太高。自动驾驶属于人工智能范畴，仍处于不断发展阶段。根据美国兰德公司的研究，自动驾驶算法想要达到人类驾驶员水平至少需要累计177 亿公里的驾驶数据来完善算法。如果配置一支100 辆自动驾驶测试车的车队，每天24 小时不停歇路测，平均时速25 英里（40 公里）每小时来计算，需要500 多年的时间才能完成目标里程，期间所耗费的时间和成本是难以承受的。

自动驾驶相应交通法规及保险理赔机制的缺失制约了自动驾驶汽车路测的大范围开展。由于自动驾驶汽车尚不能保证绝对安全，我国政府对开放自动驾驶道路测试保持谨慎的态度，仅依靠部分开放道路以及智能网联测试区进行路测，难以满足自动驾驶汽车旺盛的测试需求。主要体现在以下四个方面：

◆自动驾驶汽车路测缺乏法律依据。目前在绝大部分公开道路，尤其是高速公路上测试自动驾驶汽车仍然缺乏法律依据，阻碍了测试的进度。

◆自动驾驶路测车辆禁止载人载货，导致测试不全面。现行规定明确禁止测试过程中搭乘与测试无关的人员或货物，阻碍了测试主体开展更丰富的自动驾驶技术性测试。

◆自动驾驶汽车事故责任划分缺乏法律依据。由于自动驾驶汽车的驾驶主体是自动驾驶系统或自动驾驶服务商，和现行人类驾驶员为主体的交通法规体系存在很大差别。《侵权责任法》、《道路交通安全法》等法规中有关机动车交通事故的责任体系将不再适合，导致目前自动驾驶汽车的相关法律纠纷出现无法可依的局面。

◆自动驾驶汽车缺乏相应的保险理赔机制。自动驾驶汽车突破了有关机动车保险的规定，使得目前的自动驾驶汽车“无险可投”，增加了测试企业及其他交通参与者的风险。

极端交通条件和危险场景复现困难，而且测试安全存在隐患。自动驾驶汽车在实际道路行驶过程中，极端交通条件和危险场景可遇不可求，且安全问题也是一大困扰。根据美国国家公路交通安全管理局（NHTSA）的统计数据，汽车平均行驶43.6 万英里（70 万公里）才会发生一起事故，平均行驶1 亿英里（1.6 亿公里）死亡大约1 人。此外，自动驾驶汽车测试行业依然没有就测试的安全性等标准达成一致，制约了自动驾驶的研发测试。

形成全球认可的自动驾驶产业链体系比较困难。由于世界各国社会和经济环境千差万别，各地区的道路环境和交通习惯也大相径庭。中国的城市道路中快递、外卖、行人混行情况普遍存在，对于自动驾驶汽车的感知决策能力提出了更高的要求。而且中国的道路交通标志、标线设置不规范情况普遍存在，不同地区之间也有差别。国内与国外的交通标志标线颜色、文字说明等方面也存在差别，这些在短期内很难得到改变。上述种种问题使得自动驾驶产业链的全球化发展和技术交流面临众多实际问题。

![img](https://img-blog.csdnimg.cn/20201211155034336.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dodXpoYW5nMTY=,size_16,color_FFFFFF,t_70)

### **1.2 基于场景库的仿真测试成为自动驾驶研发的关键**

目前基于场景库的仿真测试是解决自动驾驶路测数据匮乏的重要路线。仿真测试主要通过构建虚拟场景库，实现自动驾驶感知、决策规划、控制等算法的闭环仿真测试，满足自动驾驶测试的要求。场景库是自动驾驶仿真测试的基础，场景库对现实世界的覆盖率越高，仿真测试结果越真实。而且自动驾驶汽车研发的不同阶段对于场景库的要求也不同，需要场景库实现不同的测试功能。

#### **1.2.1 场景的构成**

根据中国汽车技术研究中心的分类，自动驾驶测试场景可分为自然驾驶场景、危险工况场景、标准法规场景、参数重组场景等四大类，四类场景共同组成了场景库。

自然驾驶场景来源于汽车真实的自然驾驶状态，是构建自动驾驶测试场景中最基础的数据来源。由于自然驾驶场景包含自动驾驶汽车所处的人- 车- 环境- 任务等全方位信息，如车辆数据、驾驶人行为、道路环境等多维度信息，能够很好地体现测试的随机性、复杂性、典型性区域特点，属于自动驾驶汽车充分测试的场景，目的是为了满足自动驾驶汽车最基本的功能开发与验证。

危险工况场景主要包含大量恶劣天气环境、复杂道路交通以及典型交通事故等场景。危险工况场景是自动驾驶汽车测试过程中进行自动驾驶控制策略验证的关键部分，验证自动驾驶车辆在危险工况场景下的避撞能力是整个自动驾驶安全测试的核心，是测试验证自动驾驶有效性的必要测试场景，目的是为了验证自动驾驶汽车的安全性和可靠性。

标准法规场景是验证自动驾驶有效性的一种基础测试场景，目前有ISO、NHTSA、ENCAP、CNCAP 等多项标准、评价规程对现有自动驾驶功能进行了测试规定。标准法规场景是通过现有的标准、评价规程构建测试场景，目的是对自动驾驶汽车应该具备的基本能力进行测试。

参数重组场景是将已有仿真场景进行参数化设置并完成仿真场景的随机生成或自动重组，具有无限性、扩展性、批量化、自动化等特点。参数重组场景目的是补充自然驾驶场景、标准法规场景、危险工况场景等未覆盖的未知场景，有效覆盖自动驾驶功能测试盲区。

![img](https://img-blog.csdnimg.cn/20201211155157581.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dodXpoYW5nMTY=,size_16,color_FFFFFF,t_70)

#### **1.2.2 场景库的特点**

自动驾驶汽车的研发包括开发验证、测试评价、检测认证。每个阶段由于目的不同，其仿真测试对场景库的要求也不同。

**1）**在开发验证阶段，场景库是为了验证自动驾驶汽车各项功能，实现功能的调整和快速迭代，要求场景库具备以下特点：

◆场景库应尽可能覆盖所有功能测试，验证各项功能在各种场景下的安全性，对于某些不必要的功能可以剔除；

◆测试场景可在现实世界中实施，以验证功能的安全性，场景中的各项要素可根据测试要求进行灵活调整；

◆场景可部署到模型在环（MIL)、软件在环（SIL）、硬件在环（HIL）、车辆在环（VIL）等进行完整在环测试。

**2）**在测试评价阶段，场景库是为了评价自动驾驶汽车不同维度、不同方面性能，要求场景库具备以下特点：

◆为了针对性地评价自动驾驶汽车的各项性能，测试场景应与评价指标高度相关；

◆为使自动驾驶汽车在真实世界时和测试评价结果一致，要求测试场景要素的特征与指标与现实相符；

◆为了准确评价自动驾驶汽车在未知场景的表现，需要对参数重组情况下的场景进行补充测试，要求场景各类要素指标可量化方便进行人工编辑，不同场景下的场景要素指标要一致，方便实现场景数据的存储。

**3）**在检测认证阶段，场景库是为了考察自动驾驶汽车在各种交通行为下各项功能安全性、可靠性，为最终上路做准备，要求场景库具备以下特点：

◆自动驾驶上路前需要在各种场景下具备很高的安全性、可靠性，因此对检测认证结果的可信度要达到非常高的水平；

◆为了全国推广自动驾驶汽车测试标准，应做到测试标准统一，测试场景具有可重复性和一致性。

场景库的搭建应依据自动驾驶汽车的开发阶段进行针对性或模块化开发，在保证测试要求的前提下尽量降低用户成本。

![img](https://img-blog.csdnimg.cn/20201211155229770.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dodXpoYW5nMTY=,size_16,color_FFFFFF,t_70)

### **1.3 仿真测试与道路测试结合推动自动驾驶研发**

在自动驾驶的开发流程中，纯模型仿真—软件在环仿真—半实物仿真—封闭场地道路测试—开放道路测试的开发流程是最经济、高效的开发流程。

目前自动驾驶仿真已经被行业广泛接受。例如美国自动驾驶领军企业Waymo 旗下的仿真平台Carcraft 每天在虚拟道路上行驶约2000 万英里，相当于在真实世界中行驶10 年。截止2020 年5 月，Waymo 已经模拟行驶了150 亿英里，相比之下，去年6 月的数据是100 亿英里。除Waymo 外，通用旗下的Cruise、AutoX、小马智行等国内外自动驾驶解决方案商也在进行大量的仿真测试，以完善自己的自动驾驶系统，仿真测试已经成为自动驾驶商用最重要的测试。

在仿真场景中，普通场景下的自动驾驶算法已经比较完善，突破难点在于一些极端场景（corner cases）。由于极端场景在现实中可遇不可求，利用仿真平台可以便捷生成，所以业界共识是加大仿真测试在自动驾驶测试中的占比。目前自动驾驶算法测试大约90% 通过仿真平台完成，9% 在测试场完成，1% 通过实际路测完成。仿真测试结果可以在封闭场地进行测试认证，此外在道路测试基础上总结出危险场景，反馈到仿真测试与封闭场地测试中，最终形成评价结果，逐步完善评价准则和测试场景库，实现了仿真测试、封闭场地测试、道路测试的测试闭环，推动技术迭代升级。

随着仿真技术水平的提高和应用的普及，行业旨在达到通过仿真平台完成99.9％的测试量，封闭场地测试完成0.09％，最后0.01％到实路上去完成，这样可以使自动驾驶汽车研发达到更高效、经济的状态。

![img](https://img-blog.csdnimg.cn/20201211155301372.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dodXpoYW5nMTY=,size_16,color_FFFFFF,t_70)