- [车路协同系统的视景仿真模型](http://transport.chd.edu.cn/Upload/PaperUpLoad/713e95a0-dfd2-48b4-a833-d4c8e2334643.pdf)

# 摘要

在车路协同系统仿真的基础上，以局部交通网络的实时交通仿真为例，建立了车路协同系统视景仿真模型库，确立了视景仿真系统的框架体系结构。将视景仿真集成为整个仿真系统的一个联邦成员，建立了车车信息交互、车路信息交互的典型视景仿真功能模型。使用ＬＯＤ模型简化技术对视景仿真功能模型进行分解，生成了５个不同精细程度的ＬＯＤ模型。采用ＤＯＦ、ＬＯＤ、Ｓｗｉｔｃｈ功能化节点，从节点结构上优化了典型应用场景中的交叉口信号灯、车辆运动等相关模型，建立了一套类似模型几何形状的层级节点结构。构建了车路协同系统可视化视景仿真平台，包括ＨＬＡ／ＲＴＩ信息交互与控制模块、车路协同数据处理模块、信息交互模块、模型引导控制模块、视角动态切换模块与模型状态参数动态显示模块。采用建模优化相关技术，对典型交通场景进行了视景仿真。仿真结果表明：通过ＬＯＤ模型简化技术，模型简化率最高可达９５．５％，内存占用减少８６．３％；通过视景仿真方法的使用，提高了渲染效率与系统仿真效率，车路协同典型交通场景验证了仿真方法的可行性。

# ０ 引 言

车路协同系统是一种功能复杂的大系统，进行系统功能仿真测试是系统投入运营前的必备环节。

视景仿真技术具有现场测试所无法比拟的优势，因此，有必要研究基于虚拟的视景仿真方法，针对车路协同运行控制系统的功能测试需求，建立可视化的仿真平台以支持系统的全面、高效、可重复测试。

目前，国内外学者对视景仿真的研究取得了一定进展。在仿真系统研究方面，早在１９８３年，美国就实施了ＳＩＭＮＥＴ计划，通过计算机网络将分布于美
国和德国的１１个基地连接起来，用于各种复杂战术任务的综合训练；美国阿姆斯特朗实验室开发完成的 ＤＥＰＴＨ 系统采用虚拟现实技术实现对飞机
的维修性和保障性分析；美国的自动虚拟环境实验室ＣＡＶＥ是一个长、宽、高均约为３ｍ，配备了多个反射镜、投影仪及三维音视频设备的实验室，利用
全息图创造虚拟现实环境，模拟人的视觉、听觉和触觉，是一个典型的虚拟现实系统；Ｊｎｓｓｏｎ等利用虚拟现实技术开发了虚拟数控机床仿真系统；Ｐｏｐａ等利用虚拟现实技术开发了虚拟医学穿刺仿真系统；赵沁平研究了如何在虚拟环境中表征对象的物理特性，设计了分布式虚拟现实网络，开发了飞行模拟训练系统；丁浩杰等采用虚拟现实技术，开发了汽车驾驶仿真系统；李华兵等开发了用于对战场环境、场景进行快速仿真模拟的虚拟现实系统；殷宏等通过对战场环境的研究，建立了基于ＭｕｌｔｉＧｅｎＣｒｅａｔｏｒ／ＶＥＧＡ软件的战场视景仿真系统；陆铁坚等研究了以扫描法和参数化特征造型为桥梁模型的主要造型方法，建立了桥梁的三维视景仿真系统；郭凤香等应用虚拟视景生成系统建立了路段三维静态与动态模型，用于评价山区公路交通安全保障措施。

在模型研究方面，国内外学者针对模型简化等相关问题开展了一系列研究。Ｍｕｒａｌｉｄｈａｒａｎ等进行了基于宏观连接点元胞传输模型的高速公路交通流
仿真，讨论了元胞传输模型的交通仿真问题；Ｈｓｉｎ等提出在智能高速公路交通系统体系结构中实现商业交通模拟器 ＭＯＤＳＩＭ 和通信模拟ＣＯＭＮＥＴ的集成系统，并采用状态机对宏观交通流与通信特征进行建模；Ｈａｍａｎｎ在研究三维网格化的基础上，给出了一种基于三角形移去的模型简化方法；Ｂｒｏｄｓｋｙ等基于顶点聚类的方法，实现了一个并行模型简化算法；杨帆等通过建立单车道微观交通流模型，对车路协同系统进行研究，提高了通行效率；王蕊等提出了一种基于自组织特征映射神经网络的三维模型区域分割算法，对模型进行区域分割与简化；刘博等构建了列车运行和事故场景模型，提出了完整的视景建模方法，通过纹理、节点等组织建模方法建立了列车的三维仿真模型；郑海春等研究了 ＭｕｌｔｉＧｅｎＣｒｅａｔｏｒ建模的效率，依据层次细节（ＬｅｖｅｌｏｆＤｅｔａｉｌｓ，ＬＯＤ）、冗余多边形删除与平台融合优化等技术对作战坦克模型进行优化，降低了模型复杂度，缩短了建模时间，增强了模型的真实感；刘晓平等通过对大规模地形建模的实践，提出了一种基于四叉树网格剖分的并行简化算法，对大规模地形进行ＬＯＤ模型优化与改进，通过并行性达到提高算法效率的目的。除上述方法外，还可利用模型实例化、模型外部引用、纹理贴图、冗余多边形删除、Ｓｗｉｔｃｈ节点转换、自由度（ＤｅｇｒｅｅｏｆＦｒｅｅｄｏｍ，ＤＯＦ）节点设置等多种模型组织与优化方法进行研究［２０２１］。

从已有的研究成果来看，视景仿真作为一种前沿科技，在相关行业已取得成功应用并积累了一定实践经验，但当前中国较为成功或完备的公路智能交通行业的可视化仿真案例较为少见，直接面向车路协同系统的成果更为少见，使得车路协同系统的仿真局限在图表与数据层面，缺乏一个实时可视化的图形展示方法，大大限制了智能交通的发展。

本文基于车路协同系统仿真平台，研究了视景仿真方法在车路协同系统中的应用，通过三维建模软件 ＭｕｌｔｉＧｅｎＣｒｅａｔｏｒ构建车路协同系统视景仿
真所需的路侧设备、信号灯与信息交互行为等相关场景仿真模型，并对建立的模型进行结构优化和简化，减少内存占用，提高渲染效率，并通过编程实现
场景的综合仿真管理，建立车路协同系统可视化视景仿真平台，并对模型进行评估。

# １ 车路协同仿真系统视景仿真

视景仿真依托于车路协同仿真系统，通过与高层体系架构（ＨｉｇｈＬｅｖｅｌＡｒｃｈｉｔｅｃｔｕｒｅ，ＨＬＡ）提供的运行时间支撑框架（ＲｕｎＴｉｍｅＩｎｆｒａｓｔｒｕｓｔｕｒｅ，ＲＴＩ）仿真支撑环境建立与外部信息的传输通道，承担系统的可视化场景展现，是车路协同系统仿真的一个重要组成部分。

## 1.1 视景仿真平台与车路协同系统的关系

视景仿真平台定义为一个单独的联邦模块加入到车路协同仿真的大系统当中，通过与系统内部其他联邦成员之间进行信息交换获取实时的仿真状态信息，并予以实时的可视化仿真显示。视景仿真平台与车路协同系统的关系见图１。

![image-20211019105036357](https://gitee.com/er-huomeng/l-img/raw/master/image-20211019105036357.png)

## 1.2 视景仿真平台模型组织方法

视景仿真平台通过ＲＴＩ仿真支撑环境接收其他联邦成员发送的车路协同系统仿真信息，通过内部的数据处理、转换与执行，将结果反馈至ＲＴＩ供其他联邦成员参考。

根据ＯｐｅｎＦｌｉｇｈｔ模型的结构特点，利用 ＭｕｌｔｉＧｅｎＣｒｅａｔｏｒ建模软件提供的功能节点对模型进行构建与优化，其功能类节点主要有光照节点、ＤＯＦ节点、ＬＯＤ节点、Ｓｗｉｔｃｈ节点、实例化节点及外部引用节点等，用于改善模型的属性和层次结构。在仿真过程中合理设置功能节点，如利用ＤＯＦ节点模拟车辆内部的仪表盘与方向盘，可使其在限定的范围内运动。

车路协同系统中的视景仿真模型按分辨率的不同进行层次建模，形成车路协同系统视景仿真模型库，见图２。在后期的仿真过程中，通过实时的动态调入，加载相应的视景仿真模型到仿真场景中，利用ＶＥＧＡ虚拟仿真管理软件，在后台对仿真场景中的模型进行管理和控制，实现车路协同系统的视景仿真效果。

![image-20211019105155479](https://gitee.com/er-huomeng/l-img/raw/master/image-20211019105155479.png)

# ２ 车路协同系统典型场景建模及其优化方法

车路协同系统仿真模型主要根据车路协同系统仿真的需要进行构建，能够同时对多交叉路口、多车辆进行实时可视化仿真，建立的仿真模型见图３。

车路协同视景仿真系统主要模拟车辆行驶、信息发布和周边交通环境的变化等相关现象。车路协同系统仿真模型主要包括典型场景车车信息交互模型、车路信息交互模型、路侧设备信息交互模型、车辆模拟驾驶模型与信号灯相位实时切换模型等。

## 2.1 车路协同系统典型场景建模

在车路协同系统进行多车仿真时，车车信息交互模型将模拟车辆之间的信息交互。构建车车信息交互模型时，考虑到车车通信多采用广播方式，针对视景仿真的特点，将车车信息通信方式分解为２个单双工的通信方式表达与实现，即关键信息由本车向目标车进行传递时，采取单向有源的信息传递方式，反向亦如此。在建模时考虑到单向有源信息传递的特点，构造的车车信息交互模型具有在一定范围内进行有源定向成角度辐射功能，同时信息交互模型能够在一定传输阶段后根据传输的距离和方向，收缩至目标车辆。车车信息交互模型具体仿真效果见图４，发送的车辆状态参数及其他相关信息能够通过无线通道传递至目标车辆。

![image-20211019105237974](https://gitee.com/er-huomeng/l-img/raw/master/image-20211019105237974.png)



视景仿真的一个重要特点为构想性，尽量构建出逼真的现场仿真环境，最大限度地接近现实条件，以检验仿真系统的仿真能力，为现场的实地测试提供决策参考。

构建车辆模型时，考虑大规模仿真的需要，应设置不同分辨率下的车辆仿真模型。在高分辨率条件下，细化车辆内部结构，在保证车辆形体结构满足要求的同时，细化车辆内部的操控面板，对车辆内部的车载人机界面 （ＤｒｉｖｅｒＭａｃｈｉｎｅＩｎｔｅｒｆａｃｅ，ＤＭＩ）进行建模，采用ＤＯＦ节点控制ＤＭＩ面板模型的展出与收入，采用ＤｉａｌＧａｕｇｅ模块快速建立仿真所需的车辆仪表盘模型，再对模型插入ＤＯＦ节点组成面片，以指示和控制仪表盘指针的位置，在车路协同仿真系统运行时，显示车辆运动的实时速度、位置、车轮转速等相关参数信息。

车路信息交互模型针对车路协同系统中的通信系统进行仿真。在对通信系统进行建模时，仿真过程中车路之间的信息交互仿真行为包括移动车辆向固定的路侧设备发送信息和路侧设备向移动车辆发送信息。在仿真移动车辆向固定的路侧设备发送相关信息时，采取有源辐射方式建立相应的信息仿真模型类似车车之间的信息交互仿真。路侧设备向移动车辆发送的信息是通过一个有源的路侧设备节点，向路侧设备周围所覆盖区域内所有的车辆广播车路协同系统信息，发送的信息为有源环形辐射方式，建模时应采取有源式，发送方式则为全方位发送。车路信息交互模型仿真效果见图５。

## 2.2 LOD模型简化技术

多细节层次模型的构建能够提高系统渲染效率并降低系统仿真复杂度。模型的精细度在一定程度上反映了模型的真实程度，模型的精细程度越高，模型子面数越多，所占用内存也会越大，将大幅度增加系统的资源消耗。多细节层次模型优化技术，为同一个模型数据库内包含多个精细程度不同的模型，且在不同的条件下显示精细程度不同模型的技术。

在车路协同系统中，涉及到的局部交通网络内部均存在大量的交通元素，由于同一时刻的观察对象或目标有限，采用ＬＯＤ模型简化技术对模型进行精细程度的调整可以有效提高仿真系统效率。对于能够近距离观察的仿真模型都需要进行多细节层次模型的简化，以增强仿真的真实感。远离观察视

![image-20211019105451148](https://gitee.com/er-huomeng/l-img/raw/master/image-20211019105451148.png)

![image-20211019105511143](https://gitee.com/er-huomeng/l-img/raw/master/image-20211019105511143.png)

![image-20211019105535408](https://gitee.com/er-huomeng/l-img/raw/master/image-20211019105535408.png)

![image-20211019105552056](https://gitee.com/er-huomeng/l-img/raw/master/image-20211019105552056.png)

![image-20211019105608590](https://gitee.com/er-huomeng/l-img/raw/master/image-20211019105608590.png)

