- [7大国内外自动驾驶仿真平台汇总](https://mp.weixin.qq.com/s/5oNfzuu5NsBTXMqNDJbE2g)

## 导读

自动驾驶汽车在真正商业化应用前，需要经历大量的道路测试才能达到商用要求。采用路测来优化自动驾驶算法耗费的时间和成本太高，且开放道路测试仍受到法规限制，极端交通条件和场景复现困难，测试安全存在隐患。目前，自动驾驶仿真测试已经被行业广泛接受, **自动驾驶算法测试大约 90% 通过仿真平台完成，9% 在测试场完成，1% 通过实际路测完成。**

要想自动驾驶的仿真平台能实际为自动驾驶的路测发挥出相应的能力，必须要具备几种核心能力：**真实还原测试场景、高效利用路采数据生成仿真场景、云端大规模并行加速等，使得仿真测试满足自动驾驶感知、决策规划和控制全栈算法的闭环。**目前包括科技公司、车企、自动驾驶方案解决商、仿真软件企业、高校及科研机构等主体都在积极投身虚拟仿真平台的建设，相信在不久的未来将会对自动驾驶的商业化落地产生重要的推进作用。

本文将带领读者梳理一下**7大国内外较著名的自动驾驶仿真软件平台**。

## PreScan

PreScan是西门子公司旗下汽车驾驶仿真软件产品，Prescan是以物理模型为基础，开发ADAS和智能汽车系统的仿真平台。支持摄像头、雷达、激光雷达、GPS，以及V2V/V2I车车通讯等多种应用功能的开发应用。PreScan基于MATLAB仿真平台，主要用于（ADAS）汽车高级驾驶辅助系统和无人自动驾驶系统的仿真模拟软件，其包括多种基于雷达，摄像头，激光雷达，GPS，V2V和V2I车辆/车路通讯技术的智能驾驶应用。支持模型在环（MIL），实时软件在环（SiL），硬件在环（HiL）等多种使用模式。

Prescan由多个模块组成， 使用起来主要分为四个步骤: 搭建场景、添加传感器、 添加控制系统、 运行仿真。

- 场景搭建: PreScan 提供一个强大的图形编辑器，用户可以使用道路分段， 包括交通标牌， 树木和建筑物的基础组件库，包括机动车，  自行车和行人的交通参与者库，修改天气条件(如雨， 雪和雾) 以及光源(如太阳光，大灯和路灯)  来构建丰富的仿真场景。新版的PreScan也支持导入OpenDrive格式的高精地图，用来建立更加真实的场景。
- 添加传感器: PreScan 支持种类丰富的传感器，包括理想传感器， V2X传感器，激光雷达，毫米波雷达， 超声波雷达， 单目和双目相机， 鱼眼相机等。用户可以根据自己的需要进行添加。
- 添加控制系统: 可以通过MATLAB/ Simulink 建立控制模型，也可以和第三方动力学仿真模型(如 CarSim，VI-Grade,dSpace ASM 的车辆动力学模型)进行闭环控制。
- 运行实验:3D 可视化查看器允许用户分析实验的结果，同时可以提供图片和动画生成功能。此外， 使用ControlDesk和LabView的界面可以用来自动运行实验批次的场景以及运行硬件在环模拟。

## CarMaker

Carmaker，还有相关的  TruckMaker和MotorcycleMaker是德国IPG公司推出的动力学，ADAS和自动驾驶仿真软件。Carmaker首先是一个优秀的动力学仿真软件，提供了精准的车辆本体模型(发动机、 底盘、 悬架、传动、 转向等) ，除此之外， Carmaker还打造了包括车辆，驾驶员，道路，交通环境的闭环仿真系统。

![image-20220123001045781](https://gitee.com/er-huomeng/img/raw/master/img/image-20220123001045781.png)

- IPG Traffic：是交通环境模拟工具， 提供丰富的交通对象(车辆、 行人、 路标、交通灯、 道路施工建筑等) 模型。可实现对真实交通环境的仿真。测试车辆可识别交通对象并由此进行动作触发(如限速标志可触发车辆进行相应的减速动作)。
- IPG Driver：先进的、 可自学习的驾驶员模型。可控制在各种行驶工况下的车辆， 实现诸如上坡起步、 入库泊车以及甩尾反打方向盘等操作。并能适应车辆的动力特性(驱动形式、 变速箱类型等) 、 道路摩擦系数、 风速、 交通环境状况， 调整驾驶策略。

CarMaker 作为平台软件， 可以与很多第三方软件进行集成， 如 ADAMS、 AVLCruise、 rFpro 等， 可利用各软件的优势进行联合仿真。同时 CarMaker 配套的硬件，提供了大量的板卡接口， 可以方便的与 ECU 或者传感器进行 HIL 测试。

## CarSim

CarSim, 还有相关的 TruckSim 和 BikeSim 是 Mechanical Simulation 公司开发的强大的动力学仿真软件，  被世界各国的主机厂和供应商所广泛使用。CarSim 针对四轮汽车， 轻型卡车，TruckSim 针对多轴和双轮胎的卡车，BikeSim  针对两轮摩托车。CarSim 是一款整车动力学仿真软件， 主要从整车角度进行仿真，它内建了相当数量的车辆数学模型，  并且这些模型都有丰富的经验参数，用户可以快速使用，免去了繁杂的建模和调参的过程。

CarSim 模型在计算机上运行的速度可以比实时快 10 倍，可以仿真车辆对驾驶员控制，3D  路面及空气动力学输入的响应，模拟结果高度逼近真实车辆，主要用来预测和仿真汽车整车的操纵稳定性、制动性、平顺性、动力性和经济性。CarSim  自带标准的 Matlab/Simulink 接口，可以方便的与 Matlab/Simulink  进行联合仿真，用于控制算法的开发，同时在仿真时可以产生大量数据结果用于后续使用 Matlab 或者 Excel 进行分析或可视化。CarSim  同时提供了 RT 版本，可以支持主流的 HIL 测试系统，如 dSpace 和 NI 的系统，方便的联合进行 HIL 仿真。

## VIRES VTD

VTD (VirtualTest Drive)是德国  VIRES公司开发的一套用于ADAS，主动安全和自动驾驶的完整模块化仿真工具链。VIRES已经于2017年被MSC软件集团收购。VTD目前运行于Linux平台，它的功能覆盖了道路环境建模、 交通场景建模、天气和环境模拟、  简单和物理真实的传感器仿真、场景仿真管理以及高精度的实时画面渲染等。可以支持从SIL到HIL和VIL的全周期开发流程，开放式的模块式框架可以方便的与第三方的工具和插件联合仿真。VIRES也是广泛应用的自动驾驶仿真开放格式OpenDrive,OpenCRG和OpenScenario的主要贡献者，VTD的功能和存储也依托于这些开放格式。VTD的仿真流程主要由路网搭建，动态场景配置， 仿真运行三个步骤组成。

- VTD 提供了图形化的交互式路网编辑器RoadNetwork Editor (ROD)，在使用各种交通元素构建包含多类型车道复杂道路仿真环境的同时，可以同步生成 OpenDrive高精地图。
- 在动态场景的建立上，VTD提供了图形化的交互式场景编辑器ScenarioEditor，提供了在 OpenDrive基础上添加用户自定义行为控制的交通体，或者是某区域连续运行的交通流。
- 无论是SIL，还是 HIL，无论是实时还是非实时的仿真， 无论是单机还是高性能计算的环境，VTD都提供了相应的解决方案。VTD运行时可模拟实时高质量的光影效果及路面反光、车身渲染、 雨雪雾天气渲染、 传感器成像渲染、大灯光视觉效果等。

## PTV Vissim

Vissim是德国PTV公司提供的一款世界领先的微观交通流仿真软件。Vissim可以方便的构建各种复杂的交通环境，包括高速公路，大型环岛，停车场等，也可以在一个仿真场景中模拟包括机动车，卡车，有轨交通和行人的交互行为。它是专业的规划和评价城市和郊区交通设施的有效工具，也可以用来仿真局部紧急情况交通的影响，大量行人的疏散等。

Vissim的仿真可以达到很高的精度，包括微观的个体跟驰行为和变道行为，以及群体的合作和冲突。Vissim内置了多种分析手段，既能获得不同情况下的多种具体数据结果，也可以从高质量的三维可视化引擎获得直观的理解。无人驾驶算法也可以通过接入Vissim的方式使用模拟的高动态交通环境进行仿真测试。

## TESS NG

TESS仿真系统是同济大学孙剑教授于2006年主持开发的第一代道路交通仿真系统。自此之后，历经十年，孙剑教授课题组针对中国混合交通流运行特征开展了100多项模型创新和仿真系统应用实践。TESS  NG微观交通仿真系统所具有的主要功能有：全交通场景仿真，多模式交通仿真，智能交通系统仿真，可视化评估，二次开发接口，支持3D场景展示等。同时，TESS  NG可以与城市交通大脑、交通控制系统、可计算路网（如OpenDrive，OpenStreetMap等）一体化整合，同时可与驾驶模拟器、BIM/CIM系统、智能汽车虚拟测试工具等整合实现跨行业应用。用户还可以通过定制化服务实现更多跨行业的应用。

## CARLA

CARLA是由西班牙巴塞罗那自治大学计算机视觉中心指导开发的开源模拟器，用于自动驾驶系统的开发、训练和验证。同 AirSim一样，Carla也依托虚幻引擎进行开发，使用服务器和多客户端的架构。在场景方面, CARLA  提供了为自动驾驶创建场景的开源数字资源(包括城市布局、建筑以及车辆)  以及几个由这些资源搭建的供自动驾驶测试训练的场景。同时，CARLA也可以使用VectorZero的道路搭建软件RoadRunner制作场景和配套的高精地图，也提供了简单的地图编辑器。

CARLA也可以支持传感器和环境的灵活配置，它支持多摄像头，激光雷达，GPS等传感器，也可以调节环境的光照和天气。CARLA提供了简单的车辆和行人的自动行为模拟，也同时提供了一整套的 Python接口，可以对场景中的车辆，信号灯等进行控制，用来方便的和自动驾驶系统进行联合仿真，完成决策系统和端到端的强化学习训练。

## 参考链接：

*[1] https://www.sohu.com/a/516344816_468661*